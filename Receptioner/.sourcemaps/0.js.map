{"version":3,"sources":["../../src/pages/include/pop-up/pop-up.module.ts","../../src/components/components.module.ts","../../src/components/single-toggle/single-toggle.ts","../../src/components/select-umbrella/select-umbrella.ts","../../src/components/langComponent/langComponent.ts","../../node_modules/rxjs/BehaviorSubject.js","../../src/pages/include/pop-up/pop-up.ts","../../node_modules/rxjs/add/operator/switchMap.js","../../node_modules/rxjs/operator/switchMap.js"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { PopUpPage } from './pop-up';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { ComponentsModule } from '../../../components/components.module';\r\nimport { Keyboard } from '@ionic-native/keyboard';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PopUpPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(PopUpPage),\r\n    TranslateModule.forChild(),\r\n    ComponentsModule\r\n  ],\r\n  providers:[\r\n    Keyboard\r\n  ]\r\n})\r\nexport class PopUpPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/include/pop-up/pop-up.module.ts","import { NgModule } from '@angular/core';\r\nimport { SingleToggleComponent } from './single-toggle/single-toggle';\r\nimport { IonicModule } from 'ionic-angular';\r\nimport { SelectUmbrellaComponent } from './select-umbrella/select-umbrella';\r\nimport { langComponent } from './langComponent/langComponent';\r\n\r\n@NgModule({\r\n\tdeclarations: [\r\n\t\tSingleToggleComponent,\r\n\t\tSelectUmbrellaComponent,\r\n\t\tlangComponent\r\n\t],\r\n\timports: [\r\n\t\tIonicModule\r\n\t],\r\n\texports: [\r\n\t\tSingleToggleComponent,\r\n\t\tSelectUmbrellaComponent,\r\n\t\tlangComponent\r\n\t]\r\n})\r\nexport class ComponentsModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\n/**\r\n * Generated class for the SingleToogleComponent component.\r\n *\r\n * See https://angular.io/api/core/Component for more info on Angular\r\n * Components.\r\n */\r\n@Component({\r\n  selector: 'single-toggle',\r\n  templateUrl: 'single-toggle.html'\r\n})\r\nexport class SingleToggleComponent {\r\n\r\n    @Input() firstLabel: string;\r\n    @Input() secondLabel: string;\r\n    @Input() image1: string;\r\n    @Input() image2: string;\r\n    @Input() isImage: boolean;\r\n    @Input() enabled: boolean;\r\n    @Input() checked: boolean;\r\n    @Output() toggleChange = new EventEmitter<boolean>();\r\n\r\n    isChecked: boolean;\r\n\r\n    constructor() {\r\n        \r\n        this.isImage = false;\r\n    }\r\n    toggleClick () {\r\n        if(!this.enabled) return;\r\n\r\n        this.checked = !this.checked;\r\n\r\n        this.toggleChange.emit(this.checked);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/single-toggle/single-toggle.ts","import { Input } from '@angular/core';\r\nimport { Component, Output, EventEmitter } from '@angular/core';\r\n\r\n/**\r\n * Generated class for the SelectNumbrellaComponent component.\r\n *\r\n * See https://angular.io/api/core/Component for more info on Angular\r\n * Components.\r\n */\r\n@Component({\r\n  selector: 'select-umbrella',\r\n  templateUrl: 'select-umbrella.html'\r\n})\r\nexport class SelectUmbrellaComponent {\r\n\r\n  @Output() seatChange: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  reservationInfo: any;\r\n  seatData: { a: Array<number>, b: Array<number> } = {\r\n    a: [],\r\n    b: []\r\n  }\r\n  curSeatNums: Array<number> = [];\r\n  statusAry: Array<any> = [\r\n    { class: 'filter-brown', status: 'booked' },\r\n    { class: 'filter-red', status: 'paid' },\r\n    { class: 'filter-blue', status: 'occupied' },\r\n    { class: '', status: 'free' }\r\n  ];\r\n\r\n  seatNum: number = 0;\r\n  reservationsNumber: number = 0;\r\n  editState: { status: boolean, data: Array<number> } = { status: false, data: [] };\r\n  reserveStatus: { status: string, payment_method: string } = { status: '', payment_method: '' };\r\n\r\n  statusNum: Array<number> = [0, 0, 0, 0];\r\n  buffSeatNum: number = 0;\r\n  constructor() { }\r\n\r\n  resetMembers() {\r\n    this.reservationInfo = undefined;\r\n    this.seatData = {\r\n      a: [],\r\n      b: []\r\n    }\r\n    this.curSeatNums = [];\r\n    this.statusAry = [\r\n      { class: 'filter-brown', status: 'booked' },\r\n      { class: 'filter-red', status: 'paid' },\r\n      { class: 'filter-blue', status: 'occupied' },\r\n      { class: '', status: 'free' }\r\n    ];\r\n    this.seatNum = 0\r\n    this.reservationsNumber = 0;\r\n    this.editState =  { status: false, data: [] };\r\n    this.reserveStatus = { status: '', payment_method: '' };\r\n    this.statusNum = [0, 0, 0, 0];\r\n    this.buffSeatNum = 0;\r\n  }\r\n\r\n  ngOnInit(){\r\n    // this.resetMembers();\r\n    console.log(\"enter select-umbrella\")\r\n  }\r\n\r\n  isAvailable(num: number): boolean {\r\n    if (this.seatNum == 2)\r\n      if (num > 0) num += 2;\r\n\r\n    return this.editState && this.editState.data && this.editState.data.indexOf(num) > -1;\r\n  }\r\n\r\n  selectSeat(seat_num: number) {\r\n\r\n    if (this.reserveStatus.status == 'new' || this.reserveStatus.status == 'change') {\r\n      if (this.editState && this.editState.data && this.editState.data.indexOf(seat_num) < 0) return;\r\n    } else {\r\n      let b = this.curSeatNums.indexOf(seat_num);\r\n\r\n      if (b > -1) this.curSeatNums.splice(b, 1)\r\n      if (b > -1) this.editState.data.splice(b, 1)\r\n      // if (!this.editState.status && b > -1) return;  \r\n    }\r\n\r\n    if (this.seatNum == 2) {\r\n      if (seat_num == 0) {\r\n        if (this.seatData.a.length > 0) {\r\n          this.seatData.a.length = 0;\r\n        } else {\r\n          this.seatData.a.push(0);\r\n        }\r\n      } else {\r\n        if (this.seatData.b.length > 0) {\r\n          this.seatData.b.length = 0;\r\n        } else {\r\n          this.seatData.b.push(0);\r\n        }\r\n      }\r\n    } else {\r\n      if (seat_num < 2) {\r\n        var index = this.seatData.a.indexOf(seat_num, 0);\r\n        if (index > -1) {\r\n          this.seatData.a.splice(index, 1);\r\n        } else {\r\n          this.seatData.a.push(seat_num);\r\n        }\r\n      } else {\r\n        var index1 = this.seatData.b.indexOf(seat_num - 2, 0);\r\n        if (index1 > -1) {\r\n          this.seatData.b.splice(index1, 1);\r\n        } else {\r\n          this.seatData.b.push(seat_num - 2);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.seatChange.emit(this.seatData);\r\n  }\r\n\r\n  prepareSlots(slots) {\r\n\r\n    let availableSlots = [];\r\n    let formattedSlots = { a: [], b: [] };\r\n    let sideSlots = { a: [], b: [] };\r\n\r\n    if (slots && slots.a && slots.a.length > 0) {\r\n      let foundAtIndex = -1;\r\n      slots.a.map((item, index) => {\r\n        if (item === \"occupied\") {\r\n          formattedSlots.a.push(index);\r\n        }\r\n        if (item === \"available\") {\r\n          foundAtIndex = index;\r\n          availableSlots.push(index);\r\n        }\r\n      })\r\n      if (!foundAtIndex) {\r\n        sideSlots.a = [0];\r\n      }\r\n    }\r\n    if (slots && slots.b && slots.b.length > 0) {\r\n      let foundAtIndex = -1;\r\n      slots.b.map((item, index) => {\r\n        if (item === \"occupied\") {\r\n          formattedSlots.b.push(index);\r\n        }\r\n        if (item === \"available\") {\r\n          foundAtIndex = index;\r\n          availableSlots.push(index + 2);\r\n        }\r\n      })\r\n      if (!foundAtIndex) {\r\n        sideSlots.b = [3];\r\n      }\r\n    }\r\n\r\n    return { sideSlots: sideSlots, availableSlots: availableSlots, formattedSlots: formattedSlots };\r\n    // return { sideSlots: sideSlots, availableSlots: availableSlots, formattedSlots: { a: [], b: [] } };\r\n  }\r\n\r\n  getSelectStyle(s_slot: string, s_num?: number): string {\r\n    if(!this.reserveStatus || !this.editState) {\r\n      return '';\r\n    }\r\n    // if (this.reservationInfo) {\r\n    //   let singleReservation: boolean = this.reservationsNumber < 2;\r\n    //   let preparedSlots = this.prepareSlots(this.reservationInfo.slots);\r\n    //   this.editState = { status: singleReservation ? true : this.reservationInfo.can_seat, data: preparedSlots.availableSlots };\r\n    //   this.seatData = preparedSlots.formattedSlots;\r\n    //   this.seatNum = this.reservationInfo.seats;\r\n    //   this.reserveStatus = this.reservationInfo.reservation_status;\r\n    //   this.curSeatNums = [];\r\n    // }\r\n\r\n    if (this.reservationInfo) {\r\n      // console.log(this.reservationInfo.slots);\r\n      let preparedSlots = this.prepareSlots(this.reservationInfo.slots);\r\n\r\n      if (this.editState && this.editState.data && this.editState.data.length > -1) {\r\n        if (preparedSlots.availableSlots && preparedSlots.availableSlots.length > 0) {\r\n          preparedSlots.availableSlots.map((slot) => {\r\n            if (this.editState.data.indexOf(slot) === -1) {\r\n              this.editState.data.push(slot);\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n    let styleColor = 'filter-blue';\r\n    if (this.reserveStatus.status == 'new' || this.reserveStatus.status == 'change') {\r\n      if (this.editState.status == false) {\r\n        return 'filter-disable';\r\n      } else {\r\n\r\n      }\r\n    } else {\r\n\r\n      if (this.editState.status == false) {\r\n        styleColor = 'filter-disable';\r\n      }\r\n\r\n      if (this.editState.status && this.curSeatNums.indexOf(s_num) < 0) {\r\n        // console.log(\"this.curSeatNums\", this.curSeatNums)\r\n        styleColor = 'filter-blue';\r\n      } else {\r\n        if (this.curSeatNums.indexOf(s_num) < 0) {\r\n          // console.log(\"this.curSeatNums\", this.curSeatNums)\r\n          styleColor = 'filter-blue';\r\n        } else {\r\n          if (this.reserveStatus.status == 'booked') {\r\n            if (this.reserveStatus.payment_method == 'offline') {\r\n              styleColor = 'filter-magent';\r\n            } else {\r\n              styleColor = 'filter-red';\r\n            }\r\n          } else if (this.reserveStatus.status == 'active') {\r\n            // console.log(\"this.curSeatNums\", this.curSeatNums)\r\n            styleColor = 'filter-black';\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n    if (this.seatNum == 2) {\r\n      if (this.seatData[s_slot].length > 0)\r\n        return styleColor;\r\n    } else {\r\n      // console.log(\"this.curSeatNums\", this.seatData)\r\n      if (this.seatData[s_slot].length > 0) {\r\n        let idx = -1;\r\n        if (s_slot == 'b')\r\n          idx = this.seatData[s_slot].indexOf(s_num - 2);\r\n        else\r\n          idx = this.seatData[s_slot].indexOf(s_num);\r\n        if (idx > -1)\r\n          return styleColor;\r\n      }\r\n    }\r\n\r\n    // if(this.reserveStatus.status == 'new' || this.reserveStatus.status == 'change') {\r\n    // console.log(this.editState && this.editState.data && this.editState.data.indexOf(s_num) < 0 ? 'filter-disable' : '')\r\n    return this.editState && this.editState.data && this.editState.data.indexOf(s_num) < 0 ? 'filter-disable' : '';\r\n    // }\r\n    // }\r\n  }\r\n\r\n  getUnableStyle(seat_num: number) {\r\n    // console.log(this.curSeatNums.indexOf(seat_num) > -1);\r\n    // console.log(this.editState.data.indexOf(seat_num) > -1);\r\n    return this.editState && this.editState.data && this.editState.data.indexOf(seat_num) < 0 ? 'filter-disable' : '';\r\n  }\r\n\r\n  @Input()\r\n  set setReservationNumber(data: any) {\r\n    if (!data) return;;\r\n    this.reservationsNumber = data ? data.length : 0;\r\n    // console.log(data);\r\n  }\r\n\r\n  @Input()\r\n  set setReservation(data: any) {\r\n    if (!data) return;;\r\n    this.reservationInfo = data;\r\n    // console.log(data);\r\n  }\r\n\r\n  @Input()\r\n  set setSeats(data: number) {\r\n\r\n    this.seatNum = data;\r\n    // console.log(data);\r\n  }\r\n\r\n  @Input()\r\n  set isEditable(data: { status: boolean, data: Array<number> }) {\r\n    this.editState = data;\r\n    // console.log(data);\r\n  }\r\n\r\n  @Input()\r\n  set seatStatus(data: { status: string, payment_method: string }) {\r\n    this.reserveStatus = data;\r\n    // console.log(data);\r\n  }\r\n\r\n  @Input()\r\n  set setSeatData(data: any) {\r\n    if (typeof data == 'undefined' || data == null) return;\r\n    this.seatData = data;\r\n    this.curSeatNums = this.getCurrentSlots();\r\n    // console.log(data);\r\n  }\r\n  getCurrentSlots() {\r\n    let curSeatNums = [];\r\n    for (var i = 0; i < this.seatData.a.length; i++) {\r\n      curSeatNums.push(this.seatData.a[i]);\r\n    }\r\n    for (var j = 0; j < this.seatData.b.length; j++) {\r\n      if (this.seatNum == 4)\r\n        curSeatNums.push(this.seatData.b[j] + 2);\r\n      else\r\n        curSeatNums.push(1);\r\n    }\r\n    return curSeatNums;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/select-umbrella/select-umbrella.ts","import {Component, EventEmitter, Input, OnInit, Output} from \"@angular/core\";\r\nimport {NavController, PopoverController, ViewController} from \"ionic-angular\";\r\nimport {BehaviorSubject} from \"rxjs/BehaviorSubject\";\r\nimport {CustomBootstrap} from \"../../app/BootstrapFirstRun\";\r\nimport { PopoverLang } from \"../../pages/include/language/popover.lang\";\r\n/**\r\n * Created by shadow-viper on 1/2/18.\r\n */\r\n\r\n\r\n@Component({\r\n  selector:'langComponent',\r\n  templateUrl:'langComponent.html'\r\n})\r\nexport class langComponent implements OnInit{\r\n  currentLanguage: string = 'en';\r\n  langSubscr: BehaviorSubject<string> = new BehaviorSubject<string>('en');\r\n  langRefresh:any;\r\n  paged:string;\r\n  @Output() pushLang:EventEmitter<string>=new EventEmitter();\r\n  constructor(public popoverCtrl:PopoverController,public misc:CustomBootstrap,public navCtrl:NavController,public viewCtrl:ViewController){\r\n    this.currentLanguage=this.misc.translate.currentLanguage;\r\n  }\r\n\r\n  ngOnInit(){\r\n    this.getLanguage();\r\n  }\r\n  showLanguageMenu($event:any) {\r\n    let popover=this.popoverCtrl.create(PopoverLang,{parentSubject:this.langSubscr,language:this.currentLanguage,page:this.paged}, { cssClass: 'languagePopOver'});\r\n    popover.present({\r\n      ev:$event\r\n    }).then(()=>{\r\n      this.langSubscr.subscribe((newLang:any)=>{\r\n        this.currentLanguage=newLang;\r\n      })\r\n    });\r\n    popover.onDidDismiss((e)=>{\r\n      console.log(e);\r\n    })\r\n  }\r\n\r\n  getLanguage(){\r\n    this.misc.getStorage('AdditionalRegData').then(a=>{\r\n      if(a && a.lang)\r\n        this.currentLanguage=a.lang;\r\n      else\r\n        this.currentLanguage='en';\r\n      this.pushLang.emit(this.currentLanguage);\r\n      this.misc.translate.setLanguageProvider(this.currentLanguage);\r\n    },error=>{\r\n      //not found\r\n      this.currentLanguage='en'\r\n      this.misc.translate.setLanguageProvider(this.currentLanguage);\r\n    })\r\n  }\r\n\r\n\r\n  @Input()\r\n    set refresh(data:any){\r\n    this.getLanguage();\r\n    this.langRefresh=data;\r\n  }\r\n\r\n  @Input()\r\n  set page(data:string){\r\n      this.paged=data;\r\n  }\r\n\r\n  get page(){\r\n    return this.paged;\r\n  }\r\n\r\n  get refresh(){\r\n    return this.langRefresh;\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/langComponent/langComponent.ts","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subject_1 = require('./Subject');\nvar ObjectUnsubscribedError_1 = require('./util/ObjectUnsubscribedError');\n/**\n * @class BehaviorSubject<T>\n */\nvar BehaviorSubject = (function (_super) {\n    __extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        _super.call(this);\n        this._value = _value;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject_1.Subject));\nexports.BehaviorSubject = BehaviorSubject;\n//# sourceMappingURL=BehaviorSubject.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/BehaviorSubject.js\n// module id = 465\n// module chunks = 0 1","import { CustomBootstrap } from './../../../app/BootstrapFirstRun';\r\nimport { ApiProvider } from './../../../providers/services';\r\nimport { Tools } from './../../../providers/tools';\r\nimport { Component, NgZone, ViewChild, ElementRef } from '@angular/core';\r\nimport { TranslateService } from \"@ngx-translate/core\";\r\nimport { IonicPage, AlertController, NavController, NavParams, ViewController, Platform, ModalController, Events, LoadingController } from 'ionic-angular';\r\nimport { CommonProvider } from '../../../providers/common/common';\r\nimport 'rxjs/add/operator/switchMap';\r\nimport { DatePipe } from '@angular/common';\r\nimport { ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { ViewRef_ } from '@angular/core/src/view';\r\nimport { Storage } from '@ionic/storage';\r\nimport { NativeAudio } from '@ionic-native/native-audio';\r\nimport { Notification } from '../../../providers/interface';\r\nimport { Vibration } from '@ionic-native/vibration';\r\n\r\ndeclare var window: any;\r\n\r\n/**\r\n * Generated class for the PopUpPage page.\r\n *\r\n * See https://ionicframework.com/docs/components/#navigation for more info on\r\n * Ionic pages and navigation.\r\n */\r\n\r\n@IonicPage({\r\n    name: 'page-pop-up',\r\n    priority: 'high'\r\n})\r\n@Component({\r\n    selector: 'page-pop-up',\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    providers: [DatePipe],\r\n    templateUrl: 'pop-up.html'\r\n})\r\nexport class PopUpPage {\r\n\r\n    @ViewChild('nameInputRef') nameInputRef: ElementRef;\r\n    @ViewChild('phoneInputRef') phoneInputRef: ElementRef;\r\n    isProtocolModeOn: boolean;\r\n    isDiscountModeOn: boolean;\r\n    customValue: number = 0;\r\n    phoneNameFound: boolean = false;\r\n    currentSelectedReservation: any;\r\n    confirmPopover: any;\r\n    selectedExtraSeatsNumber: number = -1;\r\n    selectedExtraSunbedsNumber: number = -1;\r\n    isExtraSeatsDisabled: boolean = true;\r\n    isCheckedExtraSunBedsNumber: number;\r\n    reservationEdit: any;\r\n    latestrresponse: any;\r\n    item: any;\r\n    isLoading = false;\r\n    pageState: {\r\n        kind: string,\r\n        isDetail: boolean,\r\n        isNew: boolean,\r\n        action: string,\r\n        period?: {\r\n            from: any,\r\n            to: any,\r\n            period: any,\r\n            isToday: boolean\r\n        },\r\n        compState?: boolean,\r\n        canCreate: boolean\r\n    } = {\r\n            kind: '',\r\n            isDetail: false,\r\n            isNew: true,\r\n            action: '',\r\n            period: {\r\n                from: '',\r\n                to: '',\r\n                period: 0,\r\n                isToday: false\r\n            },\r\n            compState: false,\r\n            canCreate: false\r\n        };\r\n\r\n    umbrellaData: any = {\r\n        umbrella: { left: 'selected', right: 'busy' },\r\n        seats: { first: 'selected', second: 'free', third: 'busy', fourth: 'free' },\r\n        status: 'booked'\r\n    };\r\n\r\n    reserveInfo: {\r\n        amount: string,\r\n        by: string,\r\n        currency: string,\r\n        for: string,\r\n        id: string,\r\n        number: number,\r\n        period: Array<string>,\r\n        released_days: Array<any>,\r\n        seat: { number: number, sids: string, sunbeds: number },\r\n        status: string,\r\n        status_text: string\r\n    } = {\r\n            amount: '0',\r\n            by: '',\r\n            currency: '',\r\n            for: '',\r\n            id: '',\r\n            number: 0,\r\n            period: [],\r\n            released_days: [],\r\n            seat: { number: 0, sids: '1 A', sunbeds: 0 },\r\n            status: 'active',\r\n            status_text: 'Occupied'\r\n        }\r\n    oldReservation: { extra_sunbeds: number, number: number, sunbeds: number } = { extra_sunbeds: 0, number: 0, sunbeds: 0 };\r\n    singleReserve: {\r\n        amount: number, old_amount: number, status: string, created_by: string, created_for_id: string, created_for_name: string, created_for_phone: string, id: string, name: string, payment_method: string,\r\n        period: Array<{ date: string, day: string }>, phone: string, released_days: Array<string>, old_phone?: string, old_name?: string,\r\n        seat: { index?: number, extra_seats: number, number: number, position: { x: number, y: number }, slots: { a: Array<number>, b: Array<number> }, type: string, zone: string }\r\n    } = { amount: 0, old_amount: 0, status: '', created_by: '', created_for_name: '', created_for_id: '', created_for_phone: '', id: '', name: '', payment_method: '', period: [], phone: null, released_days: [], seat: { extra_seats: 0, number: 0, position: { x: 0, y: 0 }, slots: { a: [], b: [] }, type: '', zone: '' } };\r\n\r\n    reservationAry: Array<any> = [];\r\n\r\n    // seatInfo:{type:string,zone:string,available_seat:{status:boolean,data:Array<number>},broker_id:string,can_seat:any,\r\n    //   coords:{x:number,y:number},number:number,price:number,seats:number,shape:string,\r\n    //   status:any,status_color:any,waiter:{id:string,color:string}} \r\n    //   = {type:'',zone:'',available_seat:{status:false,data:[]},\r\n    //   broker_id:'',can_seat:'',coords:{x:0,y:0},number:0,price:0,seats:0,shape:'',\r\n    //   status:{},status_color:{},waiter:{id:'',color:''}};\r\n    public seatInfo: any = {};\r\n\r\n    availableSeat: {\r\n        status: boolean,\r\n        data: Array<any>\r\n    };\r\n\r\n    newReservation: any;\r\n\r\n    userInfo: { name: string, phone: string } = { name: '', phone: '' };\r\n    currency: string = '';\r\n    averagePrice: number = 0;\r\n    selectedReserveStatus: { status: string, payment_method: string } = { status: '', payment_method: '' };\r\n\r\n    periodAry: Array<any> = [];\r\n    releaseAry: Array<string> = [];\r\n    releaseAryImmutable: Array<string>;\r\n    oldReleaseAry: Array<string> = [];\r\n    newSlots: { a: Array<number>, b: Array<number> } = { a: [], b: [] };\r\n    oldSlot: { a: Array<number>, b: Array<number> } = { a: [], b: [] };\r\n    immutableSlots: { a: Array<number>, b: Array<number> } = { a: [], b: [] };\r\n    immutableExtraSeats: number;\r\n    oldExtraSeats: number;\r\n    newPosition: any = {};\r\n    oldAmount: number = 0;\r\n    stateChangePosition: { changed: boolean, paid_off: boolean } = { changed: false, paid_off: false };\r\n\r\n    isReleaseShown: boolean = false;\r\n\r\n    isFreeSunbed: boolean = false;\r\n    bedNum: Array<number> = [1, 2, 3, 4, 5, 6, 7, 8];\r\n    uSeatNum: Array<number> = [];\r\n    bSeatNum: Array<number> = [];\r\n    seatCheckedAry: Array<number> = [];\r\n    checkedExtraSeat: number;\r\n\r\n    waiter_id: string;\r\n    beachSettings: any = {};\r\n    broker_id: string = '';\r\n    beach_id: string = '';\r\n    beach_name: string = '';\r\n    periodSelNum: number = 0;\r\n    firstDate: { date: string, day: string } = { date: '', day: '' };\r\n    freeSunbedsData: { price: number, count: number, reservations?: Array<any>, old_amount: number, old_count: number, old_remaining: number } = { price: 0, count: 0, reservations: [], old_amount: 0, old_count: 0, old_remaining: 0 };\r\n\r\n    changeModalState: any;\r\n\r\n    loadingInstance: any;\r\n    isProtocolReservation = false;\r\n    isDiscountReservation = false;\r\n    guestCodes = [/*{\r\n        code:121324\r\n    }*/];\r\n    sideConfigs = {\r\n        left: ['a'],\r\n        right: ['b'],\r\n        center: ['m', 'n', 'o', 'x', 'y', 'z']\r\n    };\r\n    bookingStatus = {\r\n        left: false,\r\n        right: false,\r\n        center: false\r\n    };\r\n    sides = ['center', 'left', 'right'];\r\n    umbrella: any;\r\n    baldaquin: any;\r\n    eleList: any;\r\n    type = \"\";\r\n    isNew = false;\r\n    discountTotal = 0;\r\n    reloadingGridFlag = 0;\r\n    old_name = \"\";\r\n    old_phone = \"\";\r\n    discountPer: any = '';\r\n    discountPerList = [5, 10, 15, 20, 25, 30, 40, 50, 70, 75];\r\n    old_sunbed = 0;\r\n    old_extra_sunbed = 0;\r\n    averagePriceOld = 0;\r\n    sunbedPriceOld = 0;\r\n    settings: any = {};\r\n    gridReloadParams: any;\r\n    noprice: any = false;\r\n    posChangeZone;\r\n    firstPopup = 0;\r\n\r\n    constructor(private dp: DatePipe, private changeDetectorRef: ChangeDetectorRef, public navCtrl: NavController, private alertCtrl: AlertController, private ev: Events, public tools: Tools, private modalCtrl: ModalController,\r\n        private api: ApiProvider, private config: CustomBootstrap, private platform: Platform,\r\n        public navParams: NavParams, public viewCtrl: ViewController, private common: CommonProvider, private vibration: Vibration, private ngZone: NgZone,\r\n        public loadingCtrl: LoadingController, public translate: TranslateService, private storage: Storage, private events: Events, private nativeAudio: NativeAudio) {\r\n\r\n        this.pageState.kind = this.navParams.data.kind;\r\n        this.noprice = this.navParams.data.no_price;\r\n        //alert('-' + this.noprice)\r\n\r\n        this.firstPopup = 0;\r\n\r\n        let beach_settings = JSON.parse(localStorage.beach_settings);\r\n        this.settings = beach_settings;\r\n        this.pageState.canCreate = this.navParams.data.canCreate;\r\n        this.changeModalState = this.navParams.get('setState');\r\n        this.type = this.navParams.data.seatInfo.type;\r\n        this.setDetails(this.navParams.data.seatInfo.info.mapElement.list, \"from constructor\");\r\n        if (this.type == \"umbrella\") {\r\n            this.umbrella = this.eleList.umbrella[0];\r\n        } else if (this.type == \"baldaquin\") {\r\n            this.baldaquin = this.navParams.data.seatInfo.info.mapElement.element.baldaquin;\r\n        }\r\n        this.ngZone = new NgZone({\r\n            enableLongStackTrace: false\r\n        });\r\n\r\n        let that = this;\r\n\r\n\r\n        //this.noprice = localStorage.getItem('no_price_' + this.beach_id + '_' + this.seatInfo.number);\r\n        ////this.noprice =  sessionStorage.getItem('no_price1') ? sessionStorage.getItem('no_price1') : false;\r\n        // if(this.noprice == false){\r\n        //     this.pro\r\n        // }\r\n\r\n        this.storage.get('no_price').then((val) => {\r\n            this.noprice = val;\r\n        });\r\n\r\n        this.nativeAudio.preloadSimple('notification', 'assets/notification.mp3').then(() => {\r\n\r\n        }).catch(error => {\r\n            console.error(error);\r\n        });\r\n\r\n        if (this.pageState.kind == 'sunbed') {\r\n\r\n            this.isFreeSunbed = true;\r\n            this.freeSunbedsData = this.navParams.data.freeSunbeds;\r\n            this.freeSunbedsData.old_amount = this.navParams.data.freeSunbeds.count;\r\n            this.reservationAry = this.freeSunbedsData.reservations;\r\n\r\n            if (this.freeSunbedsData.count < this.bedNum.length) {\r\n                this.bedNum = this.bedNum.slice(0, this.freeSunbedsData.count);\r\n            }\r\n\r\n            if (this.reservationAry.length > 0) {\r\n\r\n                this.pageState.isDetail = false;\r\n                this.pageState.isNew = false;\r\n\r\n                this.pageState.action = 'listing';\r\n\r\n                this.changeModalState({ kind: this.pageState.kind, action: this.pageState.action });\r\n\r\n            } else {\r\n\r\n                this.pageState.canCreate = false;\r\n                console.log('this.addNew is called');\r\n                this.addNew();\r\n\r\n            }\r\n\r\n            this.seatInfo = {\r\n                type: '', zone: '', available_seat: { status: false, data: [] }, reservations: this.freeSunbedsData.reservations,\r\n                broker_id: '', can_seat: '', coords: { x: 0, y: 0 }, number: 0, price: 0, seats: 0, shape: '',\r\n                status: {}, status_color: {}, waiter: { id: '', color: '' }\r\n            };\r\n\r\n        } else {\r\n\r\n            this.isNew = this.navParams.data.isNew;\r\n            this.averagePrice = this.navParams.data.seatInfo.price;\r\n            this.seatInfo = this.navParams.data.seatInfo;\r\n            this.seatInfo.avgPrice = this.seatInfo.price;\r\n            this.updateStatus();\r\n            window['seatInfo'] = this.seatInfo;\r\n            window['eleList'] = this.eleList;\r\n            this.reservationAry = this.navParams.data.data;\r\n            this.availableSeat = this.navParams.data.seatInfo.available_seat;\r\n\r\n            if (this.reservationAry.length > 0) {\r\n\r\n                this.pageState.isDetail = false;\r\n                this.pageState.isNew = false;\r\n                this.pageState.action = 'listing';\r\n\r\n\r\n\r\n                this.changeModalState({\r\n                    kind: this.pageState.kind,\r\n                    action: this.pageState.action,\r\n                    seat: {\r\n                        zone: this.seatInfo.zone,\r\n                        position: this.seatInfo.coords,\r\n                        number: this.seatInfo.number\r\n                    }\r\n                });\r\n\r\n            } else {\r\n                this.pageState.isDetail = true;\r\n                this.pageState.canCreate = this.pageState.kind == 'baldaquin';\r\n                this.addNew();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Init Global Events\r\n        this.ev.subscribe('grid:seatItemUpdated', li => {\r\n            console.log('seat item updated');\r\n            this.seatInfo = li;\r\n            this.refreshView();\r\n        });\r\n\r\n        this.ev.subscribe(`app:changePosition`, data => {\r\n\r\n            this.posChangeZone = data.zone;\r\n            this.averagePrice = data.price;\r\n            let getInfo = function (obj) {\r\n                if (obj.info) {\r\n                    return getInfo(obj.info);\r\n                }\r\n                return obj;\r\n            };\r\n\r\n\r\n            /*let dataFields = ['number', 'index', 'coords'];\r\n            dataFields.map((dataField) => {\r\n                data[dataField] = this.seatInfo[dataField];\r\n            });*/\r\n\r\n\r\n\r\n            let dataFields = ['number', 'index', 'zone', 'coords', 'price', 'prices'];\r\n            dataFields.map((dataField) => {\r\n                this.navParams.data.seatInfo[dataField] = data[dataField];\r\n            });\r\n            this.seatInfo = this.navParams.data.seatInfo;\r\n            let slots: any = {};\r\n            Object.keys(this.seatInfo.status_color).map((slot) => {\r\n                slots[slot] = [];\r\n            });\r\n\r\n\r\n            this.newSlots = slots || { a: [], b: [] };\r\n            this.oldSlot = this.singleReserve.seat.slots;\r\n            this.oldExtraSeats = this.singleReserve.seat.extra_seats;\r\n            this.singleReserve.seat.slots = slots || { a: [], b: [] };\r\n            this.selectExtraSeats(this.singleReserve.seat.extra_seats);\r\n            this.newPosition = data.coords;\r\n            this.availableSeat = this.seatInfo.available_seat;\r\n            this.selectedReserveStatus.status = 'change';\r\n            this.selectedReserveStatus.payment_method = '';\r\n            this.waiter_id = data.waiter_id;\r\n\r\n            this.seatInfo = data;\r\n            this.setDetails(getInfo(this.seatInfo).mapElement.list, \"from change pos\");\r\n            this.baldaquin = getInfo(this.seatInfo).mapElement.element.baldaquin;\r\n            this.pageState.kind = data.type;\r\n\r\n            this.updateStatus();\r\n\r\n            this.changeDetectorRef.markForCheck();\r\n        });\r\n        this.ev.subscribe('app:gridUpdate', function (res) {\r\n            if (this.seatInfo && res) {\r\n                this.seatInfo.can_seat = res.can_seat;\r\n\r\n            }\r\n        }.bind(this));\r\n\r\n        // Retrieve static data from storage\r\n\r\n        this.beach_name = this.common.getStorageItem('beach_name');\r\n        this.beach_id = this.common.getStorageItem('beach_id');\r\n        this.broker_id = this.common.getStorageItem('user_id');\r\n        this.currency = this.common.getStorageItem('currency');\r\n        // Add extra sunbeds buttons for umbrella\r\n        if (true || this.pageState.kind === 'umbrella') {\r\n\r\n            let extra_seats = parseInt(this.common.getStorageItem('extra_seats'));\r\n\r\n            if (extra_seats > 0) {\r\n\r\n                for (let i = 1; i <= extra_seats; i++) {\r\n                    this.uSeatNum.push(i);\r\n                }\r\n\r\n            } else {\r\n\r\n            }\r\n\r\n\r\n        }\r\n        // if (this.phoneInputRef) {\r\n        //     this.phoneInputRef.nativeElement.focus();\r\n        // }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.storage.get('no_price').then((val) => {\r\n            this.noprice = val;\r\n        });\r\n        //this.noprice = this.navParams.data.no_price;\r\n    }\r\n\r\n    setDiscountPer(disVal) {\r\n        this.discountPer = disVal;\r\n        if (this.discountPer > 100) {\r\n            this.discountPer = 100;\r\n        }\r\n        this.calcDiscountPer();\r\n    }\r\n\r\n    setDetails(eleList, note = '') {\r\n\r\n        window['eleList'] = eleList;\r\n        this.eleList = eleList;\r\n    }\r\n    getDetails(note = '') {\r\n        if (note) {\r\n\r\n        }\r\n        return this.eleList;\r\n    }\r\n    setDetails1() {\r\n\r\n    }\r\n    calcDiscountPer() {\r\n\r\n        let total = this.getPrice(true);\r\n        let old_amount = parseFloat(this.singleReserve.old_amount + '');\r\n\r\n        let discountPer = this.discountPer || 0;\r\n        if (discountPer > 0) {\r\n            total = total - total * discountPer / 100;\r\n        }\r\n\r\n\r\n        total -= old_amount;\r\n\r\n        total = this.rountItUp(total);\r\n        this.customValue = (total > 0) ? total : 0;\r\n\r\n        // \r\n        return this.customValue;\r\n    }\r\n\r\n    getAdjustedTime(date) {\r\n        let a = new Date();\r\n        let offset = a.getTimezoneOffset() * -1;\r\n        let hour = Math.round(offset / 60),\r\n            minute = offset - hour * 60;\r\n        a.setHours(a.getHours() + hour);\r\n        a.setMinutes(a.getMinutes() + minute);\r\n        return a.getTime();\r\n    }\r\n\r\n    getGridInfo(zone, pos) {\r\n        try {\r\n            const grid = JSON.parse(localStorage.beach_grid);\r\n            return grid[zone][pos]['info'] || null;\r\n        } catch (e) {\r\n\r\n            return null;\r\n        }\r\n    }\r\n    getGridInfoByIndex(zone, index) {\r\n        try {\r\n            const grid = JSON.parse(localStorage.beach_grid);\r\n            let item = grid[zone].filter((item) => item.index == index)[0];\r\n            return item['info'] || null;\r\n        } catch (e) {\r\n\r\n            return null;\r\n        }\r\n    }\r\n    sunbedColor(li) {\r\n        let style = {\r\n            background: \"white\"\r\n        };\r\n        try {\r\n            let list = li.status_color;\r\n            style.background = list[0];\r\n\r\n            // style.background = \"linear-gradient(90deg, \" + list.join(',') + \")\";\r\n        } catch (e) {\r\n\r\n        }\r\n        return style; // JSON.stringify(style);\r\n    }\r\n    selectSunbed(li) {\r\n\r\n\r\n        if (li.locked) {\r\n            return;\r\n        }\r\n        li.selected = !li.selected;\r\n\r\n        this.atLeastOneUmbrella();\r\n        this.calcDiscountPer();\r\n\r\n    }\r\n    resetStatus(clearStatus = false) {\r\n        let sConfigs = this.sideConfigs;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n\r\n        for (let i = 0; i < sides.length; i++) {\r\n            let sideName = sides[i], // left or right\r\n                sideList = sConfigs[sideName],\r\n                list = eleList[sideName];\r\n            if (!(sideList && sideList.length && list && list.length)) {\r\n                continue;\r\n            }\r\n            for (let j = 0; j < sideList.length; j++) {\r\n                let side = sideList[j]; // a or b\r\n                for (let k = 0; k < list.length; k++) {\r\n                    let li = list[k];\r\n                    if (clearStatus) {\r\n                        li.statusList = [];\r\n                        // li.status_color = [];\r\n                    }\r\n                    li.selected = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onDiscountValueChanged($event) {\r\n\r\n    }\r\n\r\n    isFormValid() {\r\n        let resv = this.singleReserve;\r\n        let valid = true;\r\n        if (!(!resv.created_for_phone || resv.created_for_phone == '0' || (resv.created_for_phone && resv.created_for_phone.length >= 3))) {\r\n            valid = false;\r\n        }\r\n        return valid;\r\n    }\r\n    // the issue is in this function\r\n    isSelectionChanged() {\r\n\r\n        let changed = false;\r\n        let sConfigs = this.sideConfigs;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n\r\n        let seatSlot = this.singleReserve.seat.slots;\r\n        let reservation_id = this.singleReserve.id;\r\n\r\n\r\n        if (!reservation_id) {\r\n\r\n            return changed;\r\n        }\r\n        if (this.checkedExtraSeat !== this.singleReserve.seat.extra_seats) {\r\n            changed = true;\r\n        }\r\n\r\n        try {\r\n            let cur = this.currentSelectedReservation;\r\n\r\n            let phoneOld = cur.by_phone || cur.phone || cur.created_for_phone || '',\r\n                phoneNew = this.singleReserve.created_for_phone || '',\r\n                nameOld = cur.for || cur.by || cur.created_for_name || '',\r\n                nameNew = this.singleReserve.created_for_name || '',\r\n                nameList = nameOld.split(\" / \");\r\n            // if(cur.for != \"\"){\r\n            //     this.phoneNameFound = true;\r\n            // }\r\n            if (nameList[0]) {\r\n                nameOld = nameList[0];\r\n            }\r\n            if (nameList[1]) {\r\n                phoneOld = nameList[1];\r\n            }\r\n            // if (cur.by_name) {\r\n            //     nameOld = cur.by_name;\r\n            // }\r\n            // if (cur.by_number) {\r\n            //     phoneOld = cur.by_number;\r\n            // }\r\n            if (phoneOld[0] == '+') {\r\n                phoneOld = phoneOld.substr(1, phoneOld.length - 1);\r\n            }\r\n            if (phoneOld !== phoneNew || nameOld !== nameNew) {\r\n                //changed = true;\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n        if (!sides) {\r\n\r\n            return changed;\r\n        }\r\n\r\n        for (let i = 0; i < sides.length; i++) {\r\n            let side = sides[i];\r\n            let sideNameList = sConfigs[side];\r\n            let list = eleList[side];\r\n\r\n            if (!sideNameList) {\r\n                continue;\r\n            } else if (side == 'center') {\r\n                sideNameList = [Object.keys(seatSlot)[0]];\r\n            }\r\n            for (let j = 0; j < sideNameList.length; j++) {\r\n                let sideName = sideNameList[j]; // a b c \r\n                if (!list) {\r\n                    continue;\r\n                }\r\n                for (let k = 0; k < list.length; k++) {\r\n                    let li = list[k];\r\n                    if (li.selected) {\r\n                        if (!(seatSlot[sideName] && seatSlot[sideName][k])) {\r\n                            changed = true;\r\n\r\n                        }\r\n                    } else {\r\n                        if ((seatSlot[sideName] && seatSlot[sideName][k])) {\r\n                            changed = true;\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return changed;\r\n    }\r\n    getSelectedSlots() {\r\n        let slots = {};\r\n        let sConfigs = this.sideConfigs;\r\n        let seatInfo = this.seatInfo,\r\n            status_color = seatInfo.status_color;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n        for (let i = 0; i < sides.length; i++) {\r\n            let sideName = sides[i], // left or right\r\n                sideList = sConfigs[sideName],\r\n                list = eleList[sideName];\r\n\r\n            if (!(sideList && sideList.length && list && list.length)) {\r\n                continue;\r\n            }\r\n            for (let j = 0; j < sideList.length; j++) {\r\n                let side = sideList[j]; // a or b\r\n                if (!status_color[side]) {\r\n                    continue;\r\n                }\r\n                if (!slots[side]) {\r\n                    slots[side] = [];\r\n                }\r\n                for (let k = 0; k < list.length; k++) {\r\n                    let li = list[k];\r\n                    let value = (li.selected) ? 1 : 0;\r\n                    slots[side].push(value);\r\n                }\r\n            }\r\n        }\r\n        Object.keys(slots).map((side) => {\r\n            let valid = false;\r\n            for (let i = 0; i < slots[side].length; i++) {\r\n                if (slots[side][i]) {\r\n                    valid = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!valid) {\r\n                slots[side] = [];\r\n            }\r\n        });\r\n\r\n        return slots;\r\n    }\r\n\r\n    reloadMainGrid() {\r\n        let that = this;\r\n        let reloadingGridFlag = Math.random();\r\n        this.reloadingGridFlag = reloadingGridFlag;\r\n        setTimeout(() => {\r\n            if (that.reloadingGridFlag == reloadingGridFlag) {\r\n\r\n                this.ev.publish(\"grid:updateItem\", this.seatInfo);\r\n            } else {\r\n\r\n            }\r\n        }, 100);\r\n    }\r\n    updateStatus() {\r\n        if (this.firstPopup < 2) {\r\n            this.resetStatus(true); //vladimir\r\n\r\n        }\r\n        this.firstPopup++;\r\n        let sConfigs = this.sideConfigs;\r\n        let statuses = this.seatInfo.status;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n        let seatSlot = this.singleReserve.seat.slots;\r\n        window['beach'] = {\r\n            sConfigs, statuses, sides, eleList, seatSlot, singleReserve: this.singleReserve, date: new Date()\r\n        };\r\n\r\n\r\n        /*let sConfigs = window['sConfigs'];\r\n        let statuses = window['statuses'];\r\n        let sides = window['sides'];\r\n        let eleList = window['eleList'];*/\r\n\r\n        for (let i = 0; i < sides.length; i++) {\r\n            let sideName = sides[i], // left or right\r\n                sideList = sConfigs[sideName],\r\n                list = eleList[sideName];\r\n            if (!(sideList && sideList.length && list && list.length)) {\r\n                continue;\r\n            }\r\n            for (let j = 0; j < sideList.length; j++) {\r\n                let side = sideList[j]; // a or b\r\n                for (let k = 0; k < list.length; k++) {\r\n                    let li = list[k];\r\n                    if (!li.statusList) {\r\n                        li.statusList = [];\r\n                    }\r\n                    for (let l = 0; l < statuses.length; l++) {\r\n                        let status = statuses[l];\r\n\r\n                        if (status && status[side] && status[side][k] && li.statusList.indexOf(status[side][k]) == -1) {\r\n                            li.statusList.push(status[side][k]);\r\n                            if (status[side][k] !== 'available') {\r\n                                if (seatSlot[side] && seatSlot[side][k]) {\r\n                                    li.selected = true;\r\n                                    li.locked = false;\r\n                                    li.statusList = [];\r\n                                } else if (!li.selected) {\r\n                                    li.locked = true;\r\n\r\n                                } else {\r\n                                    li.locked = false;\r\n                                }\r\n\r\n                            } else {\r\n                                li.locked = false;\r\n                            }\r\n                        } else {\r\n\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        window['eleList'] = eleList;\r\n        /* for (let i = 0; i < this.sides.length; i++) {\r\n            let side = this.sides[i];\r\n            let list = this.eleList[side];\r\n            let status = '';\r\n            this.sideConfigs[side].map((sideConfig) => {\r\n              if (!status && this.seatInfo.status[sideConfig] && this.seatInfo.status[sideConfig].length) {\r\n                status = sideConfig;\r\n              }\r\n            });\r\n            let statuses = this.seatInfo.status[status];\r\n            for (let j = 0; j < list.length; j++) {\r\n              let li = list[j];\r\n              li.status = statuses[j];\r\n              if (li.status && li.status != 'available') {\r\n                this.bookingStatus[side] = true;\r\n              }\r\n            }\r\n        } */\r\n        this.reloadMainGrid(); this.changeDetectorRef.markForCheck();\r\n\r\n    }\r\n    isSideFree(side) {\r\n        let free = true;\r\n        try {\r\n            let slots = this.seatInfo.status || [];\r\n\r\n            for (let j = 0; j < slots.length; j++) {\r\n                let slot = slots[j];\r\n                if (!(slot && slot[side])) {\r\n                    continue;\r\n                }\r\n                let list = slot[side] || [];\r\n                for (let i = 0; i < list.length; i++) {\r\n                    let li = list[i];\r\n                    if (li !== 'available') {\r\n                        free = false;\r\n                        return free;\r\n                    }\r\n                }\r\n            }\r\n\r\n        } catch (e) {\r\n\r\n        }\r\n        return free;\r\n    }\r\n    isSideSeatFree(side) {\r\n\r\n        let free = false;\r\n        try {\r\n            let slots = this.seatInfo.status || [];\r\n\r\n            for (let j = 0; j < slots.length; j++) {\r\n                let slot = slots[j];\r\n                if (!(slot && slot[side])) {\r\n                    continue;\r\n                }\r\n                let list = slot[side] || [];\r\n                for (let i = 0; i < list.length; i++) {\r\n                    let li = list[i];\r\n                    if (li == 'available') {\r\n                        free = true;\r\n                        return free;\r\n                    }\r\n                }\r\n            }\r\n\r\n        } catch (e) {\r\n\r\n        }\r\n\r\n        return free;\r\n    }\r\n    isSeatInOtherReservation(reservation, side) {\r\n        let free = true;\r\n        try {\r\n            let reservations = this.seatInfo.reservations || [];\r\n            let slots = this.seatInfo.slots || [];\r\n            for (let i = 0; i < slots.length; i++) {\r\n                let slot = slots[i];\r\n                let list = slot[side] || [];\r\n                for (let j = 0; j < list.length; j++) {\r\n                    if (list[j] !== 'available') {\r\n                        free = false;\r\n                        return free;\r\n                    }\r\n                }\r\n            }\r\n        } catch (e) {\r\n\r\n        }\r\n        return free;\r\n    }\r\n\r\n    canSeatSide(sideName) {\r\n\r\n        try {\r\n\r\n            let reservation_id = this.singleReserve.id || '';\r\n            let seatSlot = this.singleReserve.seat.slots;\r\n            let reservations = this.seatInfo.reservations || [];\r\n            let slots = this.seatInfo.status || [];\r\n            let canSeatObject = {\r\n            };\r\n            let canSeat = true;\r\n            let sideConfigs = this.sideConfigs,\r\n                sides = sideConfigs[sideName] || [];\r\n            let sidesList = [];\r\n\r\n            if (!reservation_id) {\r\n                for (let i = 0; i < sides.length; i++) {\r\n                    let side = sides[i];\r\n                    canSeatObject[side] = this.isSideFree(side) || \"\";\r\n                }\r\n\r\n            } else {\r\n\r\n                for (let j = 0; j < sides.length; j++) {\r\n                    let side = sides[j];\r\n                    canSeatObject[side] = true;\r\n                    if (!seatSlot[side]) {\r\n\r\n                    }\r\n                    try {\r\n                        if (eval([0].concat(seatSlot[side] || []).join(\"+\")) > 0) {\r\n                            sidesList.push(side);\r\n                        }\r\n                    } catch (e) {\r\n                    }\r\n                    if (!seatSlot[side] || !seatSlot[side].length) {\r\n                        canSeatObject[side] = this.isSideFree(side);\r\n                    }\r\n                }\r\n                if (reservations && reservations.length) {\r\n                    for (let i = 0; i < reservations.length; i++) {\r\n                        let reservation = reservations[i];\r\n                        if (reservation !== reservation_id) {\r\n                            let slot = slots[i];\r\n                            if (!slot) {\r\n                                continue;\r\n                            }\r\n                            for (let j = 0; j < sides.length; j++) {\r\n                                let side = sides[j];\r\n                                let list = seatSlot[side] || [];\r\n                                if (sidesList.indexOf(side) > -1) {\r\n                                    if (canSeatObject[side]) {\r\n                                        // canSeatObject[side] = this.isSideSeatFree(side);\r\n                                    }\r\n                                } else {\r\n                                    if (canSeatObject[side]) {\r\n                                        canSeatObject[side] = this.isSideFree(side);\r\n                                    }\r\n                                }\r\n                                /* let list = slot[side];\r\n                                 for (let k = 0; k < list.length; k++) {\r\n                                     if(list[k]!=='available') {\r\n                                         canSeatObject[side] = false;\r\n                                     }\r\n                                 }    */\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            Object.keys(canSeatObject).map((cObj) => {\r\n                if (!canSeatObject[cObj]) {\r\n                    canSeat = false;\r\n                }\r\n            });\r\n\r\n\r\n            return canSeat;\r\n\r\n        } catch (e) {\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    canSeatSide2(side) {\r\n        try {\r\n\r\n            let sideConfigs = this.sideConfigs,\r\n                canSeat = true,\r\n                sides = sideConfigs[side],\r\n                slots = this.seatInfo.slots,\r\n                canSeatObj = this.seatInfo.can_seat_obj;\r\n            sides.map((sideName) => {\r\n                canSeat = canSeat && canSeatObj[sideName];\r\n            });\r\n            return canSeat;\r\n\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    initSingleReservation() {\r\n\r\n        this.singleReserve = {\r\n            amount: 0,\r\n            old_amount: 0,\r\n            status: '',\r\n            created_by: '',\r\n            created_for_name: '',\r\n            created_for_id: '',\r\n            created_for_phone: '',\r\n            id: '',\r\n            name: '',\r\n            payment_method: '',\r\n            period: [],\r\n            phone: null,\r\n            released_days: [],\r\n            seat: {\r\n                extra_seats: 0,\r\n                number: 0,\r\n                position: { x: 0, y: 0 },\r\n                slots: { a: [], b: [] },\r\n                type: '',\r\n                zone: ''\r\n            }\r\n        };\r\n\r\n        this.selectedReserveStatus.status = '';\r\n        this.selectedReserveStatus.payment_method = '';\r\n\r\n        this.newReservation = undefined;\r\n        this.pageState.compState = false;\r\n\r\n        if (this.pageState.kind === 'sunbed') {\r\n            this.selectExtraSeats(0);\r\n        }\r\n\r\n    }\r\n\r\n    ionViewWillEnter() {\r\n\r\n\r\n        if (this.pageState.action != 'listing') return;\r\n        if (this.pageState.isNew && this.pageState.isDetail) return;\r\n\r\n        this.pageState.isDetail = false;\r\n        this.pageState.isNew = false;\r\n\r\n        console.log(\"123456 - grid  - unsubscribe\");\r\n        this.events.unsubscribe('app:notification');\r\n        console.log(\"123456 - grid subscribe\");\r\n        this.events.subscribe('app:notification', ((data: Notification) => this.onNewNotification(data)));\r\n\r\n\r\n    }\r\n\r\n    onNewNotification(data: Notification) {\r\n        this.ngZone.run(() => {\r\n            if (data) {\r\n                console.log('Notification Data:', data);\r\n                if (this.platform.is('cordova') && data.action === 'create') {\r\n                    this.receivedNotification();\r\n                }\r\n                if (this.platform.is('cordova') && data.action === 'cancel') {\r\n                    this.receivedNotification();\r\n                }\r\n                if (this.platform.is('cordova') && data.action === 'release') {\r\n                    this.receivedNotification();\r\n                }\r\n                this.updateStatus();\r\n                this.refreshView();\r\n            }\r\n        })\r\n    }\r\n    receivedNotification() {\r\n        this.nativeAudio.play('notification').then((value) => {\r\n\r\n        }).catch(error => {\r\n            console.error(error);\r\n        });\r\n        this.vibration.vibrate(1000);\r\n    }\r\n    ionViewDidEnter() {\r\n        this.storage.get('no_price').then((val) => {\r\n            this.noprice = val;\r\n        });\r\n        //this.noprice = this.navParams.data.no_price;\r\n\r\n        // Dont change view after position is changed (UPDATE BUTTON PRESSED)\r\n        // if ( this.pageState.action != 'pos-change' ) {\r\n        //   this.pageState.action = 'listing';\r\n        // }\r\n        let kind = this.pageState.kind;\r\n        this.pageState.kind = this.isFreeSunbed ? 'sunbed' : ((typeof this.seatInfo != 'undefined') ? this.seatInfo.type : '');\r\n        if (kind !== this.pageState.kind) {\r\n\r\n        }\r\n        // // Update parent view\r\n        // this.changeModalState({action: this.pageState.action});\r\n\r\n        if (this.platform.is('android') || this.platform.is('ios')) {\r\n            // this.keyboard.disableScroll(true);\r\n        }\r\n\r\n    }\r\n\r\n    ionViewDidLeave() {\r\n        this.pageState.compState = true;\r\n        this.currentSelectedReservation = undefined;\r\n        this.getAllGuestCodes();\r\n        if (this.platform.is('android') || this.platform.is('ios')) {\r\n            // this.keyboard.disableScroll(false);\r\n        }\r\n    }\r\n\r\n    showConfirm() {\r\n        this.confirmPopover = this.alertCtrl.create({\r\n            title: 'Are you sure?',\r\n            buttons: [\r\n                {\r\n                    text: this.config.translate.translate.instant('Buttons.REJECT'),\r\n                    role: 'cancel',\r\n                    handler: () => {\r\n                    }\r\n                },\r\n                {\r\n                    text: this.config.translate.translate.instant('Buttons.OK'),\r\n                    role: 'ok',\r\n                    handler: () => {\r\n                    }\r\n                }\r\n            ],\r\n            enableBackdropDismiss: false,\r\n        });\r\n        this.confirmPopover.present();\r\n\r\n        return this.confirmPopover;\r\n    }\r\n\r\n    emit(data) {\r\n\r\n        if (data) {\r\n\r\n            if (data.refreshListing) {\r\n\r\n                if (this.pageState.kind !== 'sunbed') {\r\n\r\n                    this.listingPageData({\r\n                        beach_id: this.common.getStorageItem('beach_id'),\r\n                        seat_number: data.number,\r\n                        reservations: data.reservations\r\n                    }).subscribe(newData => {\r\n\r\n                        const colorMap = { booked: '#a82fab', occupied: '#000000', paid: '#f40006', 'change-request': '#54fe62' };\r\n\r\n                        newData = newData.map(item => {\r\n\r\n                            item.status_color = item.payment_method === 'online' && item.status === 'booked' ? colorMap['paid'] : colorMap[item.status];\r\n                            return item;\r\n\r\n                        });\r\n\r\n                        this.ngZone.run(() => {\r\n                            this.reservationAry = newData;\r\n                        });\r\n\r\n                    }, err => { });\r\n\r\n                } else {\r\n\r\n                    let { items, count, price } = data;\r\n\r\n                    this.freeSunbedsData.price = price;\r\n                    this.freeSunbedsData.count = count;\r\n                    this.freeSunbedsData.old_count = 0;\r\n\r\n                    const colorMap = { booked: '#a82fab', occupied: '#000000', paid: '#f40006', 'change-request': '#54fe62' };\r\n\r\n                    items = items.map(item => {\r\n\r\n                        item.status_color = item.payment_method === 'online' && item.status === 'booked' ? colorMap['paid'] : colorMap[item.status];\r\n                        return item;\r\n\r\n                    });\r\n\r\n                    this.ngZone.run(() => {\r\n                        this.reservationAry = items;\r\n                    });\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                if (!data.switchToListingPage) {\r\n\r\n                    if (this.pageState.action === 'reservation' || this.pageState.action === 'add') {\r\n\r\n                        if (this.pageState.action === 'reservation') {\r\n\r\n                            // RESERVATION PAGE\r\n\r\n                            this.ngZone.run(() => {\r\n\r\n                                if (this.pageState.kind !== 'sunbed') {\r\n\r\n                                    if (data.reservation_id === data.updated_id) {\r\n\r\n                                        if (data.reservation_status !== 'booked' || data.reservation_status !== 'active') {\r\n\r\n                                            let message = { expired: 'Messages.EXPIRED', canceled: 'Messages.CANCELED', completed: 'Messages.COMPLETED' };\r\n\r\n                                            if (typeof message[data.reservation_status] !== 'undefined') {\r\n\r\n                                                this.api.AmError(\r\n                                                    this.config.translate.translate.instant('Components.INFO'),\r\n                                                    this.config.translate.translate.instant(message[data.reservation_status]),\r\n                                                    [{\r\n                                                        text: this.config.translate.translate.instant('Buttons.OK'),\r\n                                                        handler: () => {\r\n                                                            this.close();\r\n                                                        }\r\n                                                    }]\r\n                                                );\r\n\r\n                                            } else {\r\n\r\n                                                // Change request\r\n                                                this.api.AmError(\r\n                                                    this.config.translate.translate.instant('Components.INFO'),\r\n                                                    this.config.translate.translate.instant('Messages.CHANGE_REQUEST'),\r\n                                                    [{\r\n                                                        text: this.config.translate.translate.instant('Buttons.OK'),\r\n                                                        handler: () => {\r\n                                                            this.listingPage();\r\n                                                        }\r\n\r\n                                                    }]);\r\n\r\n                                            }\r\n\r\n                                        } else {\r\n\r\n\r\n\r\n                                            this.availableSeat = data.canSeat;\r\n                                            // this.seatInfo.available_seat = data.canSeat;\r\n\r\n                                        }\r\n\r\n                                    } else {\r\n                                        this.availableSeat = data.canSeat;\r\n                                    }\r\n\r\n                                } else {\r\n\r\n                                    if (data.reservation_id === data.updated_id) {\r\n\r\n                                        let message = { expire: 'Messages.EXPIRED', cancel: 'Messages.CANCELED', complete: 'Messages.COMPLETED' };\r\n\r\n                                        if (typeof message[data.action] !== 'undefined') {\r\n\r\n                                            this.api.AmError(\r\n                                                this.config.translate.translate.instant('Components.INFO'),\r\n                                                this.config.translate.translate.instant(message[data.action]),\r\n                                                [{\r\n                                                    text: this.config.translate.translate.instant('Buttons.OK'),\r\n                                                    handler: () => {\r\n                                                        this.close();\r\n                                                    }\r\n                                                }]\r\n                                            );\r\n\r\n                                        } else {\r\n                                            this.updateBedsNum(data);\r\n                                        }\r\n\r\n                                    } else {\r\n                                        this.updateBedsNum(data);\r\n                                    }\r\n\r\n                                }\r\n\r\n                            });\r\n\r\n                        } else {\r\n\r\n                            // CREATE RESERVATION\r\n\r\n                            if (data.type === 'umbrella' || data.type === 'baldaquin') {\r\n\r\n                                if (!data.canSeat.status) {\r\n\r\n                                    if (this.singleReserve && this.singleReserve.id && this.singleReserve.id !== '') {\r\n\r\n                                        let slots = [];\r\n                                        const selectedSlotsLength = this.newSlots.a.length + this.newSlots.b.length;\r\n\r\n                                        if (selectedSlotsLength > 0 && selectedSlotsLength < data.seats) {\r\n\r\n                                            if (data.seats === 2) {\r\n\r\n                                                if (this.newSlots.a.length) {\r\n                                                    slots.push(0);\r\n                                                }\r\n\r\n                                                if (this.newSlots.b.length) {\r\n                                                    slots.push(1);\r\n                                                }\r\n\r\n                                            } else if (data.seats === 4) {\r\n\r\n                                                if (this.newSlots.a.length) {\r\n\r\n                                                    slots.push(0);\r\n                                                    slots.push(1);\r\n\r\n                                                }\r\n\r\n                                                if (this.newSlots.b.length) {\r\n\r\n                                                    slots.push(2);\r\n                                                    slots.push(3);\r\n\r\n                                                }\r\n\r\n                                            }\r\n\r\n                                            if (slots.length) {\r\n\r\n                                                this.ngZone.run(() => {\r\n                                                    this.availableSeat = { status: true, data: slots };\r\n                                                });\r\n\r\n                                            }\r\n\r\n                                        } else {\r\n\r\n                                            this.ngZone.run(() => {\r\n                                                this.availableSeat = data.canSeat;\r\n                                            });\r\n\r\n                                        }\r\n\r\n                                    } else {\r\n\r\n                                        this.ngZone.run(() => {\r\n\r\n                                            this.availableSeat = data.canSeat;\r\n\r\n                                            this.api.AmError(\r\n                                                this.config.translate.translate.instant('Components.INFO'),\r\n                                                this.config.translate.translate.instant('Messages.BOOKED_UMBRELLA'),\r\n                                                [{\r\n                                                    text: this.config.translate.translate.instant('Buttons.OK'),\r\n                                                    handler: () => {\r\n                                                        this.close();\r\n                                                    }\r\n                                                }]\r\n                                            );\r\n\r\n                                        });\r\n\r\n                                    }\r\n\r\n                                } else {\r\n\r\n                                    this.ngZone.run(() => {\r\n                                        this.availableSeat = data.canSeat;\r\n                                    });\r\n\r\n                                }\r\n\r\n                            } else if (data.type === 'sunbed') {\r\n\r\n                                this.ngZone.run(() => {\r\n\r\n                                    // If we made a reservation already and we're ready to pay it off...\r\n                                    if (this.singleReserve && this.singleReserve.id && this.singleReserve.id !== '') {\r\n\r\n                                        if (this.singleReserve.id === data.updated_id) {\r\n\r\n                                            let message = { expire: 'Messages.EXPIRED', cancel: 'Messages.CANCELED', complete: 'Messages.COMPLETED' };\r\n\r\n                                            if (typeof message[data.action] !== 'undefined') {\r\n\r\n                                                this.api.AmError(\r\n                                                    this.config.translate.translate.instant('Components.INFO'),\r\n                                                    this.config.translate.translate.instant(message[data.action]),\r\n                                                    [{\r\n                                                        text: this.config.translate.translate.instant('Buttons.OK'),\r\n                                                        handler: () => {\r\n                                                            this.close();\r\n                                                        }\r\n                                                    }]\r\n                                                );\r\n\r\n                                            } else {\r\n\r\n                                                this.updateBedsNum(data);\r\n\r\n                                            }\r\n\r\n                                        } else {\r\n\r\n                                            this.updateBedsNum(data);\r\n\r\n                                        }\r\n\r\n                                    } else {\r\n\r\n                                        this.updateBedsNum(data);\r\n\r\n                                    }\r\n\r\n                                });\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    if (this.pageState.kind !== 'sunbed') {\r\n\r\n                        // Feed listing page with fresh data\r\n\r\n                        this.listingPageData({\r\n                            beach_id: this.common.getStorageItem('beach_id'),\r\n                            seat_number: data.number,\r\n                            reservations: data.reservations\r\n                        }).subscribe(newData => {\r\n\r\n                            const colorMap = { booked: '#a82fab', occupied: '#000000', paid: '#f40006', 'change-request': '#54fe62' };\r\n\r\n                            newData = newData.map(item => {\r\n\r\n                                item.status_color = item.payment_method === 'online' && item.status === 'booked' ? colorMap['paid'] : colorMap[item.status];\r\n                                return item;\r\n\r\n                            });\r\n\r\n                            this.reservationAry = newData;\r\n\r\n                            this.pageState.isDetail = false;\r\n                            this.pageState.isNew = false;\r\n                            this.pageState.action = 'listing';\r\n\r\n                            delete data.switchToListingPage;\r\n\r\n                            // Update parent view\r\n                            this.changeModalState({ action: this.pageState.action, kind: this.pageState.kind });\r\n                            this.updateStatus();\r\n                            this.refreshView();\r\n                        }, err => { });\r\n\r\n                    } else {\r\n\r\n                        this.initSingleReservation();\r\n\r\n                        let { items, count, price } = data;\r\n\r\n                        this.freeSunbedsData.price = price;\r\n                        this.freeSunbedsData.count = count;\r\n                        this.freeSunbedsData.old_count = 0;\r\n\r\n                        const colorMap = { booked: '#a82fab', occupied: '#000000', paid: '#f40006', 'change-request': '#54fe62' };\r\n\r\n                        items = items.map(item => {\r\n\r\n                            item.status_color = item.payment_method === 'online' && item.status === 'booked' ? colorMap['paid'] : colorMap[item.status];\r\n                            return item;\r\n\r\n                        });\r\n\r\n                        this.reservationAry = items;\r\n\r\n                        this.pageState.isDetail = false;\r\n                        this.pageState.isNew = false;\r\n                        this.pageState.action = 'listing';\r\n\r\n                        delete data.switchToListingPage;\r\n\r\n                        // Update parent view\r\n                        this.changeModalState({ action: this.pageState.action, kind: this.pageState.kind });\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    updateBedsNum(data) {\r\n\r\n        const isReservation = this.singleReserve && this.singleReserve.id && this.singleReserve.id !== '';\r\n        const countLoop = isReservation ? (this.checkedExtraSeat + data.count) : data.count;\r\n\r\n        let bedNum = [];\r\n\r\n        for (let i = 1; i <= countLoop; i++) {\r\n            bedNum.push(i);\r\n        }\r\n\r\n        this.bedNum = bedNum.length > 8 ? bedNum.slice(0, 8) : bedNum;\r\n\r\n        this.freeSunbedsData.count = data.count;\r\n\r\n        if (isReservation) {\r\n\r\n            // if ( !this.freeSunbedsData.old_count ) {\r\n            //   this.freeSunbedsData.old_count = this.checkedExtraSeat;\r\n            // }\r\n\r\n            // this.freeSunbedsData.old_remaining = data.count;\r\n\r\n            // ...\r\n            if (data.reservation_id === data.updated_id && data.action === 'update') {\r\n\r\n                if (this.singleReserve.status === 'booked') {\r\n\r\n                    this.selectExtraSeats(data.new_count);\r\n\r\n                } else if (this.singleReserve.status === 'active') {\r\n\r\n                    this.api.AmError(\r\n                        this.config.translate.translate.instant('Components.INFO'),\r\n                        this.config.translate.translate.instant('Messages.SUNBEDS_MODIFIED'),\r\n                        [{\r\n                            text: this.config.translate.translate.instant('Buttons.OK'),\r\n                            handler: () => {\r\n                                this.listingPage();\r\n                            }\r\n                        }]\r\n                    );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            this.selectExtraSeats(0);\r\n\r\n            this.freeSunbedsData.old_amount = data.count;\r\n            this.freeSunbedsData.count = data.count;\r\n\r\n        }\r\n\r\n    }\r\n    onClickBackBtn() {\r\n        this.listingPage();\r\n        setTimeout(() => {\r\n            this.pageState.isDetail = false;\r\n\r\n            this.refreshView();\r\n        }, 300);\r\n    }\r\n\r\n    listingPage() {\r\n        let that = this;\r\n        this.ionViewDidLeave();\r\n\r\n        // if ( this.pageState.kind === 'sunbed' ) {\r\n\r\n        // if ( !this.singleReserve.id && this.checkedExtraSeat > 0 ) {\r\n        //   this.selectExtraSeats(0);\r\n        // } else if ( this.singleReserve.id ) {\r\n        //   this.selectExtraSeats(this.singleReserve.seat['count']);\r\n        // }\r\n\r\n        // }\r\n        this.refreshReservation();\r\n        // this.changeModalState(); // get fresh data (reservations) for current seat from parent view\r\n\r\n        this.refreshView();\r\n\r\n    }\r\n\r\n    listingPageData(param: any) {\r\n        if (!param.seat_number) {\r\n            param.seat_number = this.seatInfo.number\r\n        }\r\n        if (!param.reservations) {\r\n            param.reservations = this.seatInfo.reservations\r\n        }\r\n        return this.api.post('seat/reservations', param, { 'Content-Type': 'application/json' }, true, false);\r\n    }\r\n\r\n    // Popup Events  ------------------------------\r\n    getDispTotal(item: any) {\r\n\r\n        const amount = Math.round(parseFloat(item.amount) * 100) / 100;\r\n        const old_amount = Math.round(parseFloat(item.old_amount) * 100) / 100;\r\n\r\n        let total;\r\n\r\n        if (amount > 0 && old_amount === 0) {\r\n            total = `${amount} ${item.currency}`;\r\n        } else if (amount === 0 && old_amount > 0) {\r\n            total = `${old_amount} ${item.currency}`;\r\n        }\r\n\r\n        if (amount > 0 && old_amount > 0) {\r\n            total = `${amount} ${item.currency} (${this.config.translate.translate.instant('Components.PAID')} ${old_amount} ${item.currency})`;\r\n        }\r\n\r\n        return total;\r\n\r\n    }\r\n\r\n    itemClick(item: any, isDetailedPeriod = false, avoidReloadGuestCode?: boolean) {\r\n\r\n        if (item.acceptable && item.status === 'pending') return;\r\n\r\n        if (item.status === 'change-request') {\r\n            item.clicked = !item.clicked;\r\n        } else if (item.status === 'pending' || item.status === 'booked' || item.status === 'active') {\r\n            setTimeout(() => {\r\n                this.showDetail(item, isDetailedPeriod, avoidReloadGuestCode);\r\n            }, 300);\r\n        }\r\n\r\n    }\r\n\r\n    accept(item: any) {\r\n        this.api.post('booking/accept', { id: item.id }, {}, true).subscribe((resp) => {\r\n            item.acceptable = false;\r\n            this.itemClick(item);\r\n\r\n        }, (err: any) => {\r\n            item.acceptable = false;\r\n\r\n        });\r\n    }\r\n\r\n    cancel(item: any) {\r\n        // this.ev.publish(\"grid:reloadGrid\", this.gridReloadParams);\r\n        this.api.post('booking/cancel', { id: item.id, block: true }, {}, true).subscribe(() => {\r\n            this.reservationAry.forEach((reservation, index) => {\r\n                if (item.id === reservation.id) {\r\n\r\n                }\r\n                //this.changeModalState();\r\n            });\r\n            //this.ev.publish(\"grid:reloadGrid\", '');\r\n\r\n            //this.refreshView();\r\n\r\n            this.close();\r\n        });\r\n    }\r\n    generateDays(start, end) {\r\n        let dateStart = new Date(start);\r\n        let dateEnd = new Date(end);\r\n        let days = [];\r\n\r\n        let incrementalDate = new Date(start);\r\n        if (dateEnd.getDate() == dateStart.getDate()) {\r\n            days.push(this.tools.getFormattedDate(dateStart))\r\n        }\r\n        else {\r\n            days.push(this.tools.getFormattedDate(incrementalDate))\r\n            while (dateEnd.getDate() > dateStart.getDate()) {\r\n                incrementalDate = new Date(incrementalDate.setDate(incrementalDate.getDate() + 1))\r\n                days.push(this.tools.getFormattedDate(incrementalDate))\r\n            }\r\n        }\r\n        return days;\r\n    }\r\n\r\n    prepareEndpoint(item, to_confirm): { segment: string, payload: Object } {\r\n\r\n        let endPoints = {\r\n            change_request_confirm: {\r\n                segment: \"position\",\r\n                payload: {\r\n                    id: item.id,\r\n                    change: true\r\n                }\r\n            },\r\n            change_request_reject: {\r\n                segment: \"position\",\r\n                payload: {\r\n                    id: item.id,\r\n                    change: false\r\n                }\r\n            },\r\n            view_change: {\r\n                segment: \"view/\" + item.reservation_id,\r\n                payload: {\r\n                    id: item.id,\r\n                }\r\n            },\r\n            payoff: {\r\n                segment: \"pay\",\r\n                payload: {\r\n                    id: item.id,\r\n                }\r\n            },\r\n            confirm: {\r\n                segment: \"pay\",\r\n                payload: {\r\n                    id: item.id,\r\n                }\r\n            },\r\n            cancel: {\r\n                segment: \"cancel\",\r\n                payload: {\r\n                    id: item.id,\r\n                }\r\n            },\r\n            release_all: {\r\n                segment: \"release\",\r\n                payload: {\r\n                    id: item.id,\r\n                    days: this.generateDays(this.tools.getFormattedDateStr(item.period.start), this.tools.getFormattedDateStr(item.period.end))\r\n                }\r\n            }\r\n        }\r\n\r\n        return endPoints[to_confirm];\r\n    }\r\n\r\n    confirmPosition(item, to_confirm, evt?) {\r\n        console.log('confirm.position');\r\n\r\n        if (evt) {\r\n            evt.stopPropagation();\r\n        }\r\n\r\n        if (to_confirm !== 'later') {\r\n            if (to_confirm === 'view_change') {\r\n                let endPoint = this.prepareEndpoint(item, to_confirm);\r\n                this.confirmPositionRequestHandler(endPoint, item)\r\n            }\r\n            else if (to_confirm === 'payoff-skip-confirm') {\r\n                let endPoint = this.prepareEndpoint(item, 'payoff');\r\n                this.confirmPositionRequestHandler(endPoint, item)\r\n            }\r\n            else {\r\n                let endPoint = this.prepareEndpoint(item, to_confirm);\r\n                this.showConfirm().onDidDismiss((data, role) => {\r\n                    if (role === 'ok') {\r\n                        // this.loading();\r\n                        this.confirmPositionRequestHandler(endPoint, item)\r\n                    }\r\n                })\r\n            }\r\n\r\n        } else {\r\n            item.clicked = false;\r\n        }\r\n\r\n    }\r\n\r\n    confirmPositionRequestHandler(endPoint, item) {\r\n        this.api.post(`booking/` + endPoint.segment, endPoint.payload, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n\r\n            //this.pageState.action = 'listing';\r\n            //  this.close(false);\r\n\r\n\r\n            item.clicked = false;\r\n\r\n        }, err => {\r\n\r\n            this.api.AmError(\r\n                this.config.translate.translate.instant('Components.WARNING'),\r\n                err.message,\r\n                [{\r\n                    text: this.config.translate.translate.instant('Buttons.OK'),\r\n                    handler: () => {\r\n                        item.clicked = false;\r\n                    }\r\n                }]);\r\n\r\n        });\r\n    }\r\n\r\n    pastReservationIntervalHandler(start_date: string, end_date: string): { start_date: string, end_date: string } {\r\n        let now = new Date();\r\n\r\n        let newStartDate;\r\n        let newEndDate;\r\n\r\n        let isStartDatePast = now.getDate() > new Date(start_date).getDate();\r\n\r\n        if (isStartDatePast) {\r\n            newStartDate = this.tools.getFormattedDate(now)\r\n            newEndDate = start_date === end_date ? this.tools.getFormattedDate(now) : end_date;\r\n        }\r\n        else {\r\n            newStartDate = start_date\r\n            newEndDate = end_date\r\n        }\r\n\r\n        return { start_date: newStartDate, end_date: newEndDate }\r\n    }\r\n    editProtocolBooking(nameInputRef: any) {\r\n\r\n    }\r\n    getAllGuestCodes() {\r\n        const that = this;\r\n        let reservation = this.currentSelectedReservation;\r\n        let broker_id = '';\r\n        if (!reservation) {\r\n            reservation = this.latestrresponse;\r\n        }\r\n        if (!reservation) {\r\n            return '';\r\n        }\r\n        if (!reservation.broker_id) {\r\n            broker_id = reservation.created_for_id;\r\n        } else {\r\n            broker_id = reservation.broker_id;\r\n        }\r\n        this.api.post('get-code-list', {\r\n            reservation_id: reservation.id,\r\n            broker_id: broker_id\r\n        }, {\r\n                'Content-Type': 'application/json'\r\n            }, true, false).subscribe((res: any) => {\r\n                if (res.codes && res.codes.length) {\r\n                    that.guestCodes = res.codes;\r\n                } else {\r\n                    that.guestCodes = [];\r\n                }\r\n                that.refreshView();\r\n            }, (err: any) => {\r\n                that.guestCodes = [];\r\n                that.refreshView();\r\n            });\r\n    }\r\n    onClickGetCode() {\r\n        let reservation = this.currentSelectedReservation;\r\n        if (!reservation) {\r\n            reservation = this.latestrresponse;\r\n        }\r\n        let reservation_id = reservation.id;\r\n        let broker_id = '';\r\n        if (!reservation.broker_id) {\r\n            let broker_id = reservation.created_for_id;\r\n        } else {\r\n            let broker_id = reservation.broker_id;\r\n        }\r\n        this.api.post('get-new-code', {\r\n            reservation_id,\r\n            broker_id\r\n        }, {\r\n                'Content-Type': 'application/json'\r\n            }, true, false).subscribe((res: any) => {\r\n                if (res.created_by) {\r\n                    reservation.broker_id = res.created_by;\r\n                }\r\n                console.log('on click get code');\r\n                this.getAllGuestCodes();\r\n            }, (err: any) => {\r\n                console.error(err);\r\n            });\r\n    }\r\n\r\n    onClickDeleteGuestCode(guestCode) {\r\n        let guest_code_id = guestCode.id;\r\n        this.api.post('delete-guest-code', {\r\n            guest_code_id\r\n        }, {\r\n                'Content-Type': 'application/json'\r\n            }, true, false).subscribe((res: any) => {\r\n                console.log('onClickDeleteGuestCode');\r\n                this.getAllGuestCodes();\r\n            }, (err: any) => {\r\n                console.error(err);\r\n            });\r\n\r\n    }\r\n    onClickDiscount(nameInputRef: any) {\r\n        this.isDiscountModeOn = !this.isDiscountModeOn;\r\n        if (this.isDiscountModeOn) {\r\n            this.isProtocolModeOn = false;\r\n            if (nameInputRef) {\r\n                nameInputRef._native.nativeElement.focus();\r\n            }\r\n        }\r\n        if (this.isDiscountModeOn) {\r\n            this.discountPer = '';\r\n        }\r\n    }\r\n    onClickProtocol(nameInputRef: any) {\r\n        this.isProtocolModeOn = !this.isProtocolModeOn;\r\n        if (this.isProtocolModeOn) {\r\n            this.isDiscountModeOn = false;\r\n            if (nameInputRef) {\r\n                nameInputRef._native.nativeElement.focus();\r\n            }\r\n        }\r\n\r\n\r\n        // if(this.pageState.isNew){\r\n        //   this.protocolValue = this.getSunbedTotal();\r\n        // }\r\n        // else if(this.isFreeSunbed){\r\n\r\n        // }\r\n    }\r\n\r\n    refreshReservation(isDetailedPeriod = false) {\r\n        let item = this.currentSelectedReservation;\r\n        let start: any = localStorage.grid_start_date;\r\n        let end: any = localStorage.grid_end_date;\r\n\r\n        if (!(item && item.seat)) {\r\n            this.changeModalState();\r\n\r\n            return;\r\n        }\r\n\r\n\r\n        // let now = new Date();\r\n        // let hours = now.getHours();\r\n        // let minutes = now.getMinutes();\r\n        // let seconds = now.getSeconds();\r\n        // let parsedStart = this.pageState.period.isToday ? new Date(new Date(start).setHours(hours, minutes, seconds)).getTime() : new Date(new Date(start).setHours(0, 0, 0)).getTime();\r\n        // let parsedEnd = new Date(new Date(end).setHours(23, 59, 59)).getTime();\r\n\r\n        // start = this.getLocalDateTime(parsedStart)\r\n        // end = this.getLocalDateTime(parsedEnd)\r\n\r\n\r\n        let params: any = {};\r\n        try {\r\n            params = {\r\n                start_date: start,\r\n                end_date: end,\r\n                sunbeds: false,\r\n                seat_x: item.seat && item.seat.position ? item.seat.position.x : undefined,\r\n                seat_y: item.seat && item.seat.position ? item.seat.position.y : undefined,\r\n                index: item.seat.index,\r\n                seat_zone: item.seat && item.seat.zone ? item.seat.zone : undefined,\r\n                reservation_id: item.id,\r\n                excluded_days: item.released_days_original\r\n            }\r\n\r\n            params.start_date = this.pageState.period.from;\r\n            params['startDate'] = this.pageState.period.from;\r\n            params.end_date = this.pageState.period.to;\r\n            params['endDate'] = this.pageState.period.to;\r\n        } catch (e) {\r\n\r\n\r\n        }\r\n\r\n        let res;\r\n        let that = this;\r\n\r\n\r\n        this.api.get(`booking/view/${this.item.id}`, {}, { 'Content-Type': 'application/json' }, true, false).switchMap(reservationRes => {\r\n\r\n            res = reservationRes;\r\n            if (res && res.seat) {\r\n                that.old_phone = res.created_for_phone;\r\n                that.old_name = res.created_for_name;\r\n\r\n                res.info = that.getGridInfoByIndex(res.seat.zone, res.seat.index);\r\n            }\r\n\r\n\r\n            this.updateStatus();\r\n\r\n            //   let preparedDate = this.pastReservationIntervalHandler(start, end);\r\n            params.start_date = start;\r\n            params.end_date = end;\r\n            params.start_date = this.pageState.period.from;\r\n            params['startDate'] = this.pageState.period.from;\r\n            params.end_date = this.pageState.period.to;\r\n            params['endDate'] = this.pageState.period.to;\r\n            this.gridReloadParams = params;\r\n\r\n            // this.ev.publish(\"grid:reloadGrid\", params);\r\n            console.log('refreshReserve.grid')\r\n            return this.api.get(\"grid/\" + this.beach_id, params, { 'Content-Type': 'application/json' }, true, false)\r\n        }).subscribe(response => {\r\n\r\n            let seatInfo = that.seatInfo;\r\n            response.info = res.info;\r\n            Object.keys(response).map((resField) => {\r\n                that.seatInfo[resField] = response[resField];\r\n            });\r\n            /*that.averagePrice = res.avg_price;\r\n            that.seatInfo.sunbed_price = res.extra_price;*/\r\n            that.averagePrice = response.price;\r\n\r\n            that.averagePriceOld = res.avg_price;\r\n            that.sunbedPriceOld = res.extra_price;\r\n            that.old_sunbed = that.countSunbedsFromSlot(res.seat.slots);\r\n            that.old_extra_sunbed = res.seat.extra_seats;\r\n\r\n            this.updateStatus();\r\n\r\n\r\n\r\n            let res2 = response;\r\n            this.changeModalState(); // get fresh data (reservations) for current seat from parent view\r\n\r\n        }, err => { });\r\n    }\r\n\r\n    isProtocolSelectedReservation = false;\r\n    isDiscountSelectedReservation = false;\r\n\r\n    showDetail(item: any, isDetailedPeriod = false, avoidReloadGuestCodes?: boolean) {\r\n        /* this.seatInfo.can_seat = false;\r\n        this.refreshView();\r\n        let me = this;\r\n        setTimeout(() => {\r\n            me.ev.publish('grid:reloadGrid', '');\r\n        }, 300);\r\n        return; */\r\n\r\n\r\n        //  this.resetStatus();  //vladimir\r\n        this.isNew = false;\r\n        this.isReleaseShown = false;\r\n        this.isProtocolModeOn = false;\r\n        this.isDiscountModeOn = false;\r\n        this.currentSelectedReservation = item;\r\n\r\n\r\n        this.singleReserve.created_by = item.created_by;\r\n        this.singleReserve.created_for_name = item.by_name;\r\n        this.singleReserve.created_for_id = item.created_for_id;\r\n        this.singleReserve.created_for_phone = item.by_number;\r\n        // let number = parseInt(this.singleReserve.created_for_phone);\r\n        // this.api.get(`booking/check/${number}`, {}, { 'Conetent-Type': 'application/json' }, true, false).subscribe(res => {\r\n        //     this.phoneNameFound = res.customer != null;\r\n        // }, err => {\r\n        // });\r\n        this.singleReserve.seat.extra_seats = 0;\r\n        this.singleReserve.seat = item.seat;\r\n        this.isExtraSeatsDisabled = true;\r\n        /*if (typeof (item.avg_price) !== 'undefined') {\r\n            this.averagePrice = item.avg_price;\r\n        }\r\n        if (typeof (item.extra_price) !== 'undefined') {\r\n            this.seatInfo.sunbed_price = item.extra_price;\r\n        }*/\r\n\r\n        if (typeof (item.avg_price) !== 'undefined') {\r\n            this.averagePriceOld = item.avg_price;\r\n        }\r\n        if (typeof (item.extra_price) !== 'undefined') {\r\n            this.sunbedPriceOld = item.extra_price;\r\n        }\r\n        this.old_sunbed = this.countSunbedsFromSlot(item.seat.slots);\r\n        this.old_extra_sunbed = item.seat.extra_seats;\r\n\r\n\r\n\r\n        this.currency = item.currency || this.common.getStorageItem('currency');;\r\n        this.pageState.action = 'reservation';\r\n        this.oldReservation = item.seat;\r\n\r\n        if (!avoidReloadGuestCodes) {\r\n            this.getAllGuestCodes();\r\n        }\r\n\r\n        let start: any;\r\n        let end: any;\r\n        if (isDetailedPeriod) {\r\n\r\n            start = item.period && item.period.length > 0 ? this.tools.getFormattedDateStr(item.period[0].day) : this.tools.getToday();\r\n            end = item.period && item.period.length > 0 ? this.tools.getFormattedDateStr(item.period[item.period.length - 1].day) : this.tools.getToday();\r\n        }\r\n        else {\r\n            start = item.period && item.period.start ? this.tools.getFormattedDateStr(item.period.start) : this.tools.getToday();\r\n            end = item.period && item.period.end ? this.tools.getFormattedDateStr(item.period.end) : this.tools.getToday();\r\n        }\r\n\r\n        // let now = new Date();\r\n        // let hours = now.getHours();\r\n        // let minutes = now.getMinutes();\r\n        // let seconds = now.getSeconds();\r\n        // let parsedStart = this.pageState.period.isToday ? new Date(new Date(start).setHours(hours, minutes, seconds)).getTime() : new Date(new Date(start).setHours(0, 0, 0)).getTime();\r\n        // let parsedEnd = new Date(new Date(end).setHours(23, 59, 59)).getTime();\r\n\r\n        // start = this.getLocalDateTime(parsedStart)\r\n        // end = this.getLocalDateTime(parsedEnd)\r\n\r\n        if (!(item && item.seat)) {\r\n\r\n\r\n        }\r\n        let params = {\r\n            start_date: start,\r\n            end_date: end,\r\n            sunbeds: false,\r\n            seat_x: item.seat && item.seat.position ? item.seat.position.x : undefined,\r\n            seat_y: item.seat && item.seat.position ? item.seat.position.y : undefined,\r\n            index: item.seat.index,\r\n            seat_zone: item.seat && item.seat.zone ? item.seat.zone : undefined,\r\n            reservation_id: item.id,\r\n            excluded_days: item.released_days_original\r\n        }\r\n\r\n        if (!params.excluded_days || (params.excluded_days && params.excluded_days.length === 0)) {\r\n            delete params.excluded_days;\r\n        }\r\n\r\n        if (!params.seat_x) {\r\n            delete params.seat_x\r\n        }\r\n        if (!params.seat_y) {\r\n            delete params.seat_y\r\n        }\r\n        if (!params.seat_zone) {\r\n            delete params.seat_zone\r\n        }\r\n\r\n        // Update parent view\r\n        let modalState = { action: this.pageState.action, period: { start: '', end: '' }, kind: '', reservation_id: item.id, status: '' };\r\n\r\n        this.selectedExtraSeatsNumber = -1;\r\n        this.isExtraSeatsDisabled = true;\r\n\r\n        let res;\r\n        let that = this;\r\n        that.item = item;\r\n\r\n        this.api.get(`booking/view/${item.id}`, {}, { 'Content-Type': 'application/json' }, true, false).switchMap(reservationRes => {\r\n            res = reservationRes;\r\n            if (res && res.seat) {\r\n                this.discountPer = res.discount_per || 0;\r\n                this.calcDiscountPer();\r\n\r\n                /* this.averagePrice = res.avg_price;\r\n                this.seatInfo.sunbed_price = res.extra_price; */\r\n\r\n                this.averagePriceOld = res.avg_price;\r\n                this.sunbedPriceOld = res.extra_price;\r\n                this.old_sunbed = this.countSunbedsFromSlot(res.seat.slots);\r\n                this.old_extra_sunbed = res.seat.extra_seats;\r\n\r\n                if (typeof (res.can_seat) === 'undefined') {\r\n                    res.can_seat = that.seatInfo.can_seat;\r\n                }\r\n                res.info = that.getGridInfoByIndex(res.seat.zone, res.seat.index);\r\n                // that.seatInfo = res;\r\n                Object.keys(res).map((resField: any) => {\r\n                    // that.seatInfo[resField] = res[resField];\r\n                });\r\n            }\r\n\r\n            this.updateStatus();\r\n\r\n\r\n            let free_sunbeds = (res) ? res.extra_sunbeds : 0;\r\n            this.beachSettings = res.beach_setting;\r\n            this.bSeatNum = [];\r\n            for (let i = 0; free_sunbeds && i < free_sunbeds; i++) {\r\n                this.bSeatNum.push(i + 1);\r\n            }\r\n            if (res.protocol) {\r\n                this.isProtocolSelectedReservation = true;\r\n                this.isProtocolModeOn = true;\r\n            } else {\r\n                this.isProtocolSelectedReservation = false;\r\n                this.isProtocolModeOn = false;\r\n            }\r\n            if (res.discount) {\r\n                this.isDiscountSelectedReservation = true;\r\n                this.isDiscountModeOn = true;\r\n            } else {\r\n                this.isDiscountSelectedReservation = false;\r\n                this.isDiscountModeOn = false;\r\n            }\r\n            //   let preparedDate = this.pastReservationIntervalHandler(start, end);\r\n            params.start_date = start;\r\n            params.end_date = end;\r\n\r\n            if (!that.pageState.period.from || !that.pageState.period.to) {\r\n\r\n            } else {\r\n                params.start_date = that.pageState.period.from;\r\n                params.end_date = that.pageState.period.to;\r\n\r\n            }\r\n\r\n            // on show existing reservation    \r\n            console.log('showDetail.grid')\r\n            return this.api.get(\"grid/\" + this.beach_id, params, { 'Content-Type': 'application/json' }, true, false)\r\n\r\n        }).subscribe(response => {\r\n            response.info = res.info;\r\n            Object.keys(response).map((resp) => {\r\n                this.seatInfo[resp] = response[resp];\r\n            });\r\n            // this.averagePrice = res.avg_price;\r\n            // this.seatInfo.sunbed_price = res.extra_price;\r\n            this.averagePriceOld = res.avg_price;\r\n            this.sunbedPriceOld = res.extra_price;\r\n            this.old_sunbed = this.countSunbedsFromSlot(res.seat.slots);\r\n            this.old_extra_sunbed = res.seat.extra_seats;\r\n\r\n            this.averagePrice = response.price;\r\n            this.seatInfo.sunbed_price = response.sunbed_price;\r\n            this.updateStatus();\r\n\r\n\r\n\r\n\r\n            let res2 = response;\r\n            this.reservationEdit = response;\r\n            if (res && res.seat) {\r\n                // this.isExtraSeatsDisabled = false;\r\n\r\n                if (this.reservationEdit.slots && this.reservationEdit.number) {\r\n                    this.ev.publish('app:gridUpdate', this.reservationEdit);\r\n                }\r\n                if (res.seat.type === 'sunbed') {\r\n                    this.selectedExtraSeatsNumber = res.seat.count;\r\n                }\r\n                else {\r\n                    this.selectedExtraSeatsNumber = res.seat.extra_seats || 0;\r\n                }\r\n            }\r\n\r\n            // Update modal's state\r\n            modalState.period.start = res.period[0].date;\r\n            modalState.period.end = res.period.length > 0 ? res.period[res.period.length - 1].date : res.period[0].date;\r\n            modalState.kind = this.pageState.kind;\r\n            modalState.status = res.status;\r\n\r\n            if (modalState.kind != 'sunbed') {\r\n                modalState['seat'] = { zone: item.seat.zone, position: item.seat.position };\r\n            }\r\n\r\n            this.changeModalState(modalState);\r\n\r\n            if (this.pageState.kind == 'sunbed') {\r\n\r\n                this.setOldReleaseDays(res.released_days);\r\n                this.releaseAry = res.released_days;\r\n                this.singleReserve = res;\r\n                this.singleReserve.created_for_phone = res.created_for_phone || res.phone;\r\n                this.singleReserve.old_phone = res.created_for_phone || res.phone;\r\n                this.singleReserve.old_name = res.created_for_name || res.name;\r\n                this.singleReserve.created_for_name = res.created_for_name || res.name;\r\n                this.oldAmount = parseFloat(res.old_amount);\r\n                this.singleReserve.old_amount = parseFloat(res.old_amount);\r\n                this.singleReserve.amount = parseFloat(res.amount);\r\n                this.selectedReserveStatus.status = res.status;\r\n                this.selectedReserveStatus.payment_method = res.payment_method;\r\n                this.freeSunbedsData.old_remaining = this.freeSunbedsData.count;\r\n                this.freeSunbedsData.old_count = res.seat.count;\r\n                this.checkedExtraSeat = res.seat.count;\r\n\r\n                this.seatCheckedAry = [];\r\n                this.seatCheckedAry.push(this.singleReserve.seat['count']);\r\n\r\n                this.refreshSunbedsCount(modalState.period);\r\n\r\n            } else {\r\n\r\n                this.setOldReleaseDays(res.released_days);\r\n                this.releaseAry = res.released_days;\r\n                this.singleReserve = res;\r\n                this.singleReserve.created_for_phone = res.created_for_phone || res.phone;\r\n                this.singleReserve.old_phone = res.created_for_phone || res.phone;\r\n                this.singleReserve.created_for_name = res.created_for_name || res.name;\r\n                this.oldAmount = parseFloat(res.old_amount);\r\n                this.singleReserve.old_amount = parseFloat(res.old_amount);\r\n\r\n                if (res.seat.type === 'umbrella') {\r\n\r\n                    let slot = res.seat.slots;\r\n                    this.newSlots = slot;\r\n                    this.immutableSlots = JSON.parse(JSON.stringify(res.seat.slots));\r\n                    this.immutableExtraSeats = JSON.parse(JSON.stringify(res.seat.extra_seats));\r\n\r\n                }\r\n\r\n                this.singleReserve.amount = parseInt(res.amount);\r\n                this.newPosition = res.seat.position;\r\n                this.selectedReserveStatus.status = res.status;\r\n                this.selectedReserveStatus.payment_method = res.payment_method;\r\n\r\n                this.checkedExtraSeat = this.singleReserve.seat.extra_seats;\r\n\r\n                // for(let i = 0; i < this.singleReserve.seat.extra_seats; i++){\r\n                //   this.seatCheckedAry.push(i + 1);\r\n                // }\r\n\r\n            }\r\n            if (!this.singleReserve.id) {\r\n                this.averagePrice = 0;\r\n\r\n            }\r\n            /*if (!this.selectedReserveStatus || (this.selectedReserveStatus && this.selectedReserveStatus.status != 'new')) {\r\n                if (this.pageState.kind != 'sunbed') {\r\n                    this.averagePrice = res2 && res2.price ? res2.price : this.navParams.data.seatInfo.price;\r\n\r\n\r\n\r\n                }\r\n                else {\r\n                    this.averagePrice = 0;\r\n                }\r\n            }\r\n            else {\r\n                this.averagePrice = 0;\r\n            }*/\r\n\r\n            // ui action (show/hide)\r\n            this.pageState.isDetail = true;\r\n            this.pageState.isNew = false;\r\n\r\n            this.periodAry = res.period;\r\n\r\n        }, err => { });\r\n\r\n    }\r\n\r\n    countSunbedsFromSlot(slots, all = false) {\r\n        let count = 0;\r\n        Object.keys(slots).map((slot) => {\r\n            if (all) {\r\n                count += slots[slot].length;\r\n            } else {\r\n                count += eval([0].concat(slots[slot]).join(\"+\"));\r\n            }\r\n\r\n        });\r\n        return count;\r\n    }\r\n    rountItUp(price: number): number {\r\n        return price ? Math.round(price * 100) / 100 : 0;\r\n    }\r\n\r\n    refreshSunbedsCount(period) {\r\n        console.log('refreshSunbedsCount.grid');\r\n        const url = `grid/${this.beach_id}`;\r\n\r\n        const param = {\r\n            start_date: period.start,\r\n            end_date: period.end,\r\n            sunbeds: true\r\n        };\r\n\r\n        this.api.get(url, param, { 'Content-Type': 'application/json' }, true, false).subscribe(sunbeds => {\r\n            /*let free_sunbeds  = sunbeds.free_sunbeds;\r\n            this.bSeatNum = [];\r\n            for(let i=0; i<=free_sunbeds;i++) {\r\n                this.bSeatNum.push(i);\r\n            }*/\r\n            let bedNum = [];\r\n\r\n            for (let i = 1; i <= (this.checkedExtraSeat + sunbeds.count); i++) {\r\n                bedNum.push(i);\r\n            }\r\n\r\n            if (bedNum.length > 8) bedNum = bedNum.slice(0, 8);\r\n\r\n            this.bedNum = bedNum;\r\n\r\n        }, err => { });\r\n\r\n    }\r\n\r\n    setOldReleaseDays(days: Array<string>) {\r\n        this.oldReleaseAry = [];\r\n        for (let i = 0; i < days.length; i++) {\r\n            this.oldReleaseAry.push(days[i]);\r\n        }\r\n    }\r\n\r\n    refreshView() {\r\n        let that = this;\r\n        if (that.changeDetectorRef !== null &&\r\n            that.changeDetectorRef !== undefined &&\r\n            !(this.changeDetectorRef as ViewRef_).destroyed) {\r\n            that.changeDetectorRef.markForCheck();\r\n            that.changeDetectorRef.detectChanges();\r\n        }\r\n    }\r\n\r\n    addNew() {\r\n\r\n        this.isNew = true;\r\n        this.discountPer = 0;\r\n        this.isReleaseShown = false;\r\n        this.singleReserve.created_by = '';\r\n        this.singleReserve.created_for_name = '';\r\n        this.singleReserve.created_for_id = '';\r\n        this.singleReserve.created_for_phone = '';\r\n        this.singleReserve.seat.extra_seats = 0;\r\n        this.singleReserve.old_amount = 0;\r\n        this.isExtraSeatsDisabled = true;\r\n        this.isDiscountModeOn = false;\r\n        this.isProtocolModeOn = false;\r\n        this.customValue = 0;\r\n        this.averagePrice = this.seatInfo.avgPrice || this.seatInfo.price || 0;\r\n\r\n\r\n        let that = this;\r\n\r\n\r\n\r\n\r\n        // Update parent view\r\n        let modalState = { action: 'add', period: { start: '', end: '' }, kind: '' };\r\n        // this.resetStatus();\r\n        this.config.getStorage('period').then(r => {\r\n\r\n            that.currentSelectedReservation = undefined;\r\n            that.selectedExtraSeatsNumber = -1;\r\n            that.isExtraSeatsDisabled = true;\r\n            that.getAllGuestCodes();\r\n            that.pageState.period = r;\r\n            that.pageState.isDetail = true;\r\n            that.pageState.isNew = true;\r\n            that.singleReserve.amount = 0;\r\n            that.singleReserve.phone = '';\r\n            that.singleReserve.name = '';\r\n            that.singleReserve.id = this.seatInfo.id;\r\n            that.singleReserve.seat.slots = { a: [], b: [] }\r\n            that.currency = this.common.getStorageItem('currency');\r\n            that.pageState.compState = true;\r\n            that.availableSeat = this.seatInfo.available_seat;\r\n            that.selectedReserveStatus.status = 'new';\r\n            that.pageState.action = 'add';\r\n            that.selectedReserveStatus.payment_method = '';\r\n            that.reservationEdit = undefined;\r\n\r\n            if (that.isNew || that.selectedReserveStatus.status == 'new') {\r\n                if (that.isNew) {\r\n                    that.averagePrice = that.navParams && that.navParams.data && that.navParams.data.seatInfo ? that.navParams.data.seatInfo.avgPrice : 0;\r\n                } else {\r\n                    that.averagePrice = that.navParams && that.navParams.data && that.navParams.data.seatInfo ? that.navParams.data.seatInfo.price : 0;\r\n                }\r\n\r\n            }\r\n\r\n\r\n\r\n            // Update modal's state\r\n            modalState.period.start = r.from;\r\n            modalState.period.end = r.to;\r\n            modalState.kind = this.pageState.kind;\r\n\r\n            if (modalState.kind != 'sunbed') {\r\n                modalState['seat'] = { zone: that.seatInfo.zone, position: that.seatInfo.coords };\r\n            }\r\n            that.changeModalState(modalState);\r\n\r\n        });\r\n        setTimeout(() => {\r\n            if (that.changeDetectorRef !== null &&\r\n                that.changeDetectorRef !== undefined &&\r\n                !(this.changeDetectorRef as ViewRef_).destroyed) {\r\n                that.changeDetectorRef.markForCheck();\r\n                that.changeDetectorRef.detectChanges();\r\n            }\r\n        }, 500);\r\n    }\r\n\r\n    changedPhoneNumber = false;\r\n    changePhoneNumber(newValue) {\r\n        if (!this.reservationEdit) return;\r\n        let old = this.singleReserve.old_phone || '';\r\n        if (old !== newValue) {\r\n            this.changedPhoneNumber = true;\r\n        } else {\r\n            this.changedPhoneNumber = false;\r\n        }\r\n    }\r\n    removeFocus(ev: any, inputRef) {\r\n        inputRef._native.nativeElement.blur()\r\n    }\r\n\r\n    lookUpPhone(ev: any, phoneInputRef, nameInputRef) {\r\n        if (ev.value == '') return;\r\n        this.api.get(`booking/check/${this.singleReserve.created_for_phone}`, {}, { 'Conetent-Type': 'application/json' }, true, false).subscribe(res => {\r\n            this.phoneNameFound = res.customer != null;\r\n            if (res.customer != null) {\r\n                this.singleReserve.created_for_phone = this.regulatePhone(res.customer.phone, true);\r\n                this.singleReserve.old_phone = this.regulatePhone(res.customer.phone, true);\r\n                this.singleReserve.created_for_name = res.customer.name;\r\n                this.singleReserve.created_for_id = res.customer.id;\r\n            }\r\n            else {\r\n                setTimeout(function () {\r\n                    nameInputRef.setFocus();\r\n                }, 100);\r\n            }\r\n        }, err => {\r\n            setTimeout(function () {\r\n                nameInputRef.setFocus();\r\n            }, 100);\r\n        });\r\n    }\r\n\r\n    regulatePhone(phone: string, toGet: boolean): any {\r\n        if (toGet) {\r\n            let ary = phone.split('+');\r\n            return ary[1];\r\n        } else {\r\n            return `+${phone}`;\r\n        }\r\n    }\r\n\r\n    getSelectedFormatPeriod(r: any): Array<{ date: string, day: string }> {\r\n\r\n        let periods: Array<{ date: string, day: string }> = [];\r\n        let sDate = new Date(r.from);\r\n        for (let i = 0; i < r.period; i++) {\r\n            var dateStr = `${sDate.getFullYear()}-${this.tools.getFormatedNum(sDate.getMonth() + 1)}-${this.tools.getFormatedNum(sDate.getDate() + i + 1)}`;\r\n            var dayStr = `${this.tools.getFormatedNum(sDate.getDate() + i + 1)}.${this.tools.getFormatedNum(sDate.getMonth() + 1)}`;\r\n            periods.push({ date: dateStr, day: dayStr });\r\n        }\r\n        return periods;\r\n\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Release part\r\n\r\n    toggleRelease() {\r\n\r\n        this.isReleaseShown = !this.isReleaseShown;\r\n\r\n        if (!this.isReleaseShown) {\r\n            this.releaseAry = [];\r\n        }\r\n\r\n    }\r\n\r\n    alreadyReleased(date: string) {\r\n        return this.oldReleaseAry.indexOf(date, 0) > -1;\r\n    }\r\n\r\n    checkReleaseDay(item: { date: string, day: string }) {\r\n\r\n        if (this.alreadyReleased(item.date)) return;\r\n\r\n        let index = this.releaseAry.indexOf(item.date, 0);\r\n\r\n        if (index > -1) {\r\n            this.releaseAry.splice(index, 1);\r\n        } else {\r\n            this.releaseAry.push(item.date);\r\n        }\r\n\r\n    }\r\n    isAllReleaseSelected() {\r\n        let selected = true;\r\n        let list = this.singleReserve.period || [];\r\n        let list2 = this.releaseAry || [];\r\n        list.map((li) => {\r\n            if (list2.indexOf(li.date) == -1) {\r\n                selected = false;\r\n            }\r\n        });\r\n        return selected;\r\n    }\r\n    onClickCheck($event) {\r\n        this.onAllReleaseClicked($event.checked);\r\n    }\r\n    onAllReleaseClicked(status = true) {\r\n        this.releaseAry = [];\r\n        let list = this.singleReserve.period || [];\r\n        if (status) {\r\n            list.map((li) => {\r\n                this.releaseAry.push(li.date);\r\n            });\r\n        }\r\n    }\r\n\r\n    isReleaseChecked(item: { date: string, day: string }): boolean {\r\n        var index = this.releaseAry.indexOf(item.date, 0);\r\n        if (index > -1) {\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    isReleaseCalendarDirty() {\r\n        return this.oldReleaseAry.length === this.releaseAry.length;\r\n    }\r\n\r\n    getComma(day: string) {\r\n        var lastDay = this.singleReserve.released_days[this.singleReserve.released_days.length - 1];\r\n        return day == lastDay ? '' : ',';\r\n    }\r\n\r\n    onRelease() {\r\n\r\n        let param = {\r\n            id: this.singleReserve.id,\r\n            days: this.releaseAry\r\n        }\r\n\r\n        this.api.post('booking/release', param, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n            if (res.completed) {\r\n                this.close();\r\n            } else {\r\n                this.setOldReleaseDays(this.singleReserve.status === 'active' ? this.singleReserve.released_days : this.releaseAry);\r\n            }\r\n\r\n        }, err => { });\r\n\r\n    }\r\n\r\n    isRelease(date: string) {\r\n        for (let i = 0; i < this.periodAry.length; i++) {\r\n            // let item = this.releaseAry.find(this.periodAry[i]);\r\n        }\r\n    }\r\n\r\n    // End of Release -----------------------------------------\r\n    // Extra sunbeds\r\n    selectExtraSeats(item: number) {\r\n        // if (item === 0 && this.currentSelectedReservation) return;\r\n        if (this.checkedExtraSeat === item) {\r\n\r\n            if (this.singleReserve && this.singleReserve.id && this.singleReserve.id !== '' && this.pageState.kind === 'sunbed') {\r\n                return false;\r\n            }\r\n\r\n            this.checkedExtraSeat = 0;\r\n            // this.singleReserve.seat.extra_seats = 0;\r\n            this.pageState.canCreate = true;\r\n\r\n            if (this.pageState.kind == 'sunbed') {\r\n                this.freeSunbedsData.count = this.freeSunbedsData.old_amount === 0 ? item : this.freeSunbedsData.old_amount;\r\n            }\r\n\r\n        } else {\r\n\r\n            this.checkedExtraSeat = item;\r\n\r\n            if (this.pageState.kind != 'sunbed') {\r\n\r\n                // this.singleReserve.seat.extra_seats = this.checkedExtraSeat ? this.checkedExtraSeat : 0;\r\n                this.pageState.canCreate = this.checkedExtraSeat > 0\r\n\r\n            } else {\r\n                this.pageState.canCreate = this.checkedExtraSeat > 0\r\n\r\n                if (this.selectedReserveStatus.status === 'active') {\r\n\r\n                    this.freeSunbedsData.count = this.freeSunbedsData.old_amount - (this.checkedExtraSeat ? this.checkedExtraSeat : 0) + this.freeSunbedsData.old_count;\r\n\r\n                } else {\r\n\r\n                    if (this.singleReserve && this.singleReserve.id && this.singleReserve.id !== '') {\r\n\r\n                        if ((this.freeSunbedsData.old_count - this.checkedExtraSeat) === 0) {\r\n                            this.freeSunbedsData.count = this.freeSunbedsData.old_remaining;\r\n                        } else {\r\n                            this.freeSunbedsData.count = (this.freeSunbedsData.old_count + this.freeSunbedsData.old_remaining) - this.checkedExtraSeat;\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        this.freeSunbedsData.count = this.freeSunbedsData.old_amount - this.checkedExtraSeat;\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.calcDiscountPer();\r\n    }\r\n\r\n    removedExtraSunbeds = false\r\n    isCheckedExtra(item: number) {\r\n        if (!this.selectedSeatCount(false)) {\r\n            this.checkedExtraSeat = 0;\r\n            // this.singleReserve.seat.extra_seats = 0;\r\n        }\r\n        if (this.selectedExtraSeatsNumber === item && this.currentSelectedReservation) {\r\n            if (this.currentSelectedReservation.status === 'active') {\r\n                if (this.checkedExtraSeat === item) {\r\n                    this.removedExtraSunbeds = false;\r\n                    return 'blocked-black'\r\n                } else {\r\n                    this.removedExtraSunbeds = true;\r\n                    return ''\r\n                }\r\n            }\r\n            else if (\r\n                this.currentSelectedReservation.status === 'booked' && this.currentSelectedReservation.payment_method == 'offline'\r\n            ) {\r\n                if (this.checkedExtraSeat === item) {\r\n                    this.removedExtraSunbeds = false;\r\n                    return 'blocked-magent';\r\n                }\r\n                else {\r\n                    this.removedExtraSunbeds = true;\r\n                    return '';\r\n                }\r\n            }\r\n            else if (\r\n                this.currentSelectedReservation.status === 'booked' && this.currentSelectedReservation.payment_method == 'online'\r\n            ) {\r\n                return 'blocked-red'\r\n            }\r\n            else {\r\n                return 'blocked-black'\r\n            }\r\n        } else if (this.checkedExtraSeat === item) {\r\n            return 'active'\r\n        }\r\n        else {\r\n            return ''\r\n        }\r\n\r\n    }\r\n\r\n    isCheckedExtraSunBeds(item: number) {\r\n        if (this.selectedExtraSunbedsNumber === item && this.currentSelectedReservation) {\r\n            if (this.currentSelectedReservation.status === 'active') {\r\n                if (this.isCheckedExtraSunBedsNumber === item) {\r\n                    this.removedExtraSunbeds = false;\r\n                    return 'blocked-black'\r\n                } else {\r\n                    this.removedExtraSunbeds = true;\r\n                    return ''\r\n                }\r\n            }\r\n            else if (\r\n                this.currentSelectedReservation.status === 'booked' && this.currentSelectedReservation.payment_method == 'offline'\r\n            ) {\r\n                if (this.isCheckedExtraSunBedsNumber === item) {\r\n                    this.removedExtraSunbeds = false;\r\n                    return 'blocked-magent';\r\n                }\r\n                else {\r\n                    this.removedExtraSunbeds = true;\r\n                    return '';\r\n                }\r\n            }\r\n            else if (\r\n                this.currentSelectedReservation.status === 'booked' && this.currentSelectedReservation.payment_method == 'online'\r\n            ) {\r\n                return 'blocked-red'\r\n            }\r\n            else {\r\n                return 'blocked-black'\r\n            }\r\n        } else if (this.isCheckedExtraSunBedsNumber === item) {\r\n            return 'active'\r\n        }\r\n        else {\r\n            return ''\r\n        }\r\n\r\n    }\r\n\r\n    getExtraDisable() {\r\n\r\n        // if(this.pageState.isNew){\r\n        //   return this.singleReserve.seat.slots.a.length + this.singleReserve.seat.slots.b.length < this.seatInfo.available_seat.data.length;\r\n        // }else{\r\n\r\n        // if ( this.selectedReserveStatus.status === 'change' ) {\r\n        //   return false;\r\n        // }\r\n\r\n        let toDisable = this.singleReserve.seat.slots.a.length + this.singleReserve.seat.slots.b.length < this.seatInfo.seats;\r\n\r\n        if (toDisable && this.singleReserve.seat.extra_seats > 0) {\r\n            toDisable = false;\r\n        }\r\n\r\n        return toDisable;\r\n\r\n        // }\r\n    }\r\n\r\n    priceDiff(): number {\r\n        let diff = this.getPrice() - this.oldAmount;\r\n        return diff > 0 ? diff : 0;\r\n    }\r\n\r\n    getPrice(include_old_amount = false): number {\r\n        let total = 0;\r\n        let action = this.pageState.action;\r\n        let extraSeatNew = this.checkedExtraSeat || 0;\r\n        let selectedSeatNew = this.selectedSeatCount() - extraSeatNew;\r\n        let extraSeatOldOrg = this.old_extra_sunbed;\r\n        let extraSeatOld = extraSeatOldOrg;\r\n        let selectedSeatOld = this.old_sunbed;\r\n        let reservation_id = this.singleReserve.id;\r\n        let old_amount = this.singleReserve.old_amount || 0;\r\n        let avgPriceNew = Number(this.averagePrice);\r\n        // let avgPriceOldOrg = Number(this.averagePriceOld) || avgPriceNew;\r\n        let avgPriceOldOrg = avgPriceNew;\r\n        let avgPriceOld = avgPriceOldOrg;\r\n\r\n\r\n        if (action == 'pos-change') {\r\n            avgPriceOld = avgPriceNew;\r\n            extraSeatOld = extraSeatNew;\r\n        }\r\n\r\n        let extraSunbedPriceNew = this.seatInfo.sunbed_price;\r\n        let extraSunbedPriceOld = this.sunbedPriceOld;\r\n        let days = (this.isNew) ? (this.pageState.period.period + 1) : (this.periodAry.length - this.releaseAry.length);\r\n        let daysAll = days;\r\n\r\n        let sunbedTotal = 0;\r\n        let sunbedExtraTotal = 0;\r\n        if (extraSeatNew > extraSeatOld) {\r\n            sunbedExtraTotal = (extraSeatNew - extraSeatOld) * extraSunbedPriceNew + (extraSeatOld * extraSunbedPriceOld);\r\n        } else {\r\n            sunbedExtraTotal = extraSeatNew * extraSunbedPriceOld;\r\n        }\r\n        if (selectedSeatNew > selectedSeatOld) {\r\n            sunbedTotal = (selectedSeatNew - selectedSeatOld) * avgPriceNew + (selectedSeatOld * avgPriceOld);\r\n        }\r\n        else {\r\n            sunbedTotal = selectedSeatNew * avgPriceOld;\r\n        }\r\n        if (action == 'pos-change') {\r\n            if (extraSeatNew > 0) {\r\n                sunbedExtraTotal = extraSeatNew * extraSunbedPriceNew;\r\n            } else {\r\n                sunbedExtraTotal = extraSeatNew * extraSunbedPriceOld;\r\n            }\r\n        }\r\n        total = sunbedTotal + sunbedExtraTotal;\r\n        console.log(\"GET PRICE CALC:::\", {\r\n            days,\r\n            total,\r\n            totalAll: days * total,\r\n            sunbedExtraTotal,\r\n            sunbedTotal,\r\n            extraSunbedPriceOld,\r\n            extraSunbedPriceNew,\r\n            avgPriceOld,\r\n            avgPriceNew,\r\n            extraSeatOld,\r\n            extraSeatNew,\r\n            selectedSeatOld,\r\n            selectedSeatNew,\r\n            old_amount,\r\n            pageState: this.pageState\r\n        });\r\n        total = days * total;\r\n        if (!this.isDiscountModeOn) {\r\n            this.customValue = total;\r\n        }\r\n        if (reservation_id && old_amount && !include_old_amount) {\r\n            total = total - old_amount;\r\n        }\r\n        let totoalPrice = (total > 0) ? this.rountItUp(total) : 0;\r\n\r\n        if (selectedSeatNew == selectedSeatOld && !(action == 'pos-change') && sunbedExtraTotal == 0) {\r\n            return this.singleReserve.amount;\r\n        }\r\n        else {\r\n            return (total > 0) ? this.rountItUp(total) : 0;\r\n        }\r\n\r\n    }\r\n\r\n    selectedSeatCount(extra = true) {\r\n        let selectedList = [];\r\n        let seatSlot: any = Object.assign({}, this.singleReserve.seat.slots);\r\n\r\n        if (this.pageState.kind == 'baldaquin') {\r\n            seatSlot = {};\r\n            let slots = Object.keys(this.navParams.data.seatInfo.status_color || {}).map((slot) => {\r\n                seatSlot[slot] = [1];\r\n            });\r\n            try {\r\n                if (this.eleList.center[0]) {\r\n                    this.eleList.center[0].selected = true;\r\n                }\r\n            } catch (e) {\r\n                // console.error(\"SELECTED SEAT COUNT ERROR::\", e, this.eleList);\r\n            }\r\n        }\r\n        let extraSeat = (this.checkedExtraSeat) ? this.checkedExtraSeat : 0;\r\n\r\n\r\n\r\n\r\n        let count = 0;\r\n        let sConfigs = this.sideConfigs;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n\r\n\r\n        for (let i = 0; i < sides.length; i++) {\r\n            let sideName = sides[i], // left or right\r\n                sideList = sConfigs[sideName],\r\n                list = eleList[sideName];\r\n            if (!(sideList && sideList.length && list && list.length)) {\r\n                continue;\r\n            }\r\n            if (this.isNew && !this.canSeatSide(sideName)) {\r\n\r\n                continue;\r\n            }\r\n            for (let j = 0; j < sideList.length; j++) {\r\n                let side = sideList[j]; // a or b\r\n                for (let k = 0; k < list.length; k++) {\r\n                    let li = list[k];\r\n                    if (!li.selected && !li.locked) {\r\n                        // Busy\r\n                    } else {\r\n                        // Free\r\n                        if (!li.locked) {\r\n                            selectedList.push({ li, k, side });\r\n                            count++;\r\n                        }\r\n                    }\r\n                }\r\n                if (sideName == 'center') {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (extra) {\r\n            return count + extraSeat;\r\n        }\r\n        return count;\r\n    }\r\n\r\n\r\n    atLeastOneUmbrella() {\r\n        let seatSlot = this.singleReserve.seat.slots;\r\n        let reservation_id = this.singleReserve.id;\r\n        let sConfigs = this.sideConfigs;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n\r\n\r\n\r\n        if (reservation_id && seatSlot) {\r\n            this.isExtraSeatsDisabled = true;\r\n            for (let i = 0; i < sides.length; i++) {\r\n                let sideName = sides[i], // left or right\r\n                    sideList = sConfigs[sideName],\r\n                    list = eleList[sideName];\r\n                let full = true;\r\n                if (!list.length) {\r\n                    continue;\r\n                }\r\n\r\n                for (let j = 0; j < list.length; j++) {\r\n                    let li = list[j];\r\n                    if (!(li.selected && !li.locked)) {\r\n                        full = false;\r\n\r\n                    } else {\r\n\r\n                    }\r\n                }\r\n                if (full) {\r\n                    this.isExtraSeatsDisabled = false;\r\n                    break;\r\n                }\r\n            }\r\n\r\n        } else {\r\n            for (let i = 0; i < sides.length; i++) {\r\n                let sideName = sides[i], // left or right\r\n                    sideList = sConfigs[sideName],\r\n                    list = eleList[sideName];\r\n                if (!(sideList && sideList.length && list && list.length)) {\r\n                    continue;\r\n                }\r\n                if (this.isNew && !this.canSeatSide(sideName)) {\r\n                    continue;\r\n                }\r\n                for (let j = 0; j < sideList.length; j++) {\r\n                    let side = sideList[j]; // a or b\r\n                    for (let k = 0; k < list.length; k++) {\r\n                        let li = list[k];\r\n                        if (!li.selected && !li.locked) {\r\n                            if (!(reservation_id && seatSlot)) {\r\n                                this.isExtraSeatsDisabled = true;\r\n                            }\r\n                            this.selectedExtraSeatsNumber = -1;\r\n                            this.checkedExtraSeat = 0;\r\n                            this.singleReserve.seat.extra_seats = 0;\r\n                            this.isAnySideFullCheck();\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (!(reservation_id && seatSlot)) {\r\n                this.isExtraSeatsDisabled = false;\r\n                this.isAnySideFullCheck();\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    isAnySideFullCheck() {\r\n        if (!this.isNew && this.isExtraSeatsDisabled) {\r\n\r\n            this.isExtraSeatsDisabled = !this.isAnySideFull();\r\n        }\r\n    }\r\n\r\n    isAnySideFull() {\r\n\r\n        let sConfigs = this.sideConfigs;\r\n        let sides = this.sides;\r\n        let eleList = this.getDetails();\r\n\r\n        for (let i = 0; i < sides.length; i++) {\r\n            let sideName = sides[i], // left or right\r\n                sideList = sConfigs[sideName],\r\n                list = eleList[sideName];\r\n            if (!(sideList && sideList.length && list && list.length)) {\r\n                continue;\r\n            }\r\n            for (let j = 0; j < sideList.length; j++) {\r\n                let side = sideList[j]; // a or b\r\n                let booked = true;\r\n                for (let k = 0; k < list.length; k++) {\r\n                    let li = list[k];\r\n                    if (!li.selected && !li.locked) {\r\n                        booked = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (booked) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    getFormattedDay(date: string) { // \"2018-05-24\"\r\n        return this.tools.getFormattedDayStr(date);\r\n    }\r\n\r\n\r\n\r\n    close(close = true) {\r\n        console.log('onClose');\r\n\r\n        if (close) {\r\n            this.initSingleReservation();\r\n\r\n            if (this.viewCtrl) {\r\n                this.viewCtrl.dismiss(null, null, {\r\n                    duration: 0,\r\n                    animate: false\r\n                });\r\n            }            \r\n        } else {\r\n            // this.ev.publish(\"grid:transaction\", {});\r\n\r\n            console.log('publish.singleItemUpdate');\r\n            this.ev.publish('grid:singleItemUpdate', {\r\n                seatNumber: this.singleReserve.seat.number,\r\n                seatIndex: this.singleReserve.seat.index,\r\n                reservationId: this.singleReserve.id,\r\n                seatZone: this.singleReserve.seat.zone\r\n            })\r\n        }\r\n    }\r\n\r\n    onSelectSeat(event: { a: Array<number>, b: Array<number> }) {\r\n\r\n        const selectedSunbeds = (event.a.length + event.b.length);\r\n\r\n\r\n        // this.isExtraSeatsDisabled = this.selectedReserveStatus.status == 'new' && selectedSunbeds < 1;\r\n        if (selectedSunbeds === 0) {\r\n            this.singleReserve.seat.extra_seats = 0;\r\n            this.freeSunbedsData.count = 0;\r\n            this.pageState.canCreate = false;\r\n        }\r\n\r\n        if (this.selectedReserveStatus.status != 'change') {\r\n\r\n            // // Unselect extra sunbeds if the seat have at least a free sunbed\r\n            if (selectedSunbeds < this.seatInfo.seats) {\r\n                this.selectExtraSeats(0);\r\n            }\r\n\r\n        } else {\r\n            if (selectedSunbeds === 0) {\r\n                this.selectExtraSeats(0);\r\n            } else {\r\n                if (selectedSunbeds === this.seatInfo.seats) {\r\n                    this.selectExtraSeats(this.oldExtraSeats);\r\n                } else {\r\n                    this.selectExtraSeats(this.checkedExtraSeat === 0 && (selectedSunbeds === this.seatInfo.seats) ? this.oldExtraSeats : this.checkedExtraSeat);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.newSlots = event;\r\n\r\n        this.pageState.canCreate = selectedSunbeds > 0;\r\n\r\n    }\r\n    changedCustomPrice = false\r\n\r\n    getCustomPriceChanges() {\r\n        if (!this.isProtocolSelectedReservation && !this.isDiscountSelectedReservation) return true;\r\n        return !this.changedCustomPrice;\r\n    }\r\n\r\n    getUpdateAvailable() {\r\n        if (this.isProtocolSelectedReservation || this.isDiscountSelectedReservation) return false;\r\n        if (this.selectedReserveStatus.status == 'active') return true;\r\n        if (this.singleReserve.seat.type == 'baldaquin' && this.selectedReserveStatus.status == 'booked') return false;\r\n\r\n        let oldSunbeds = this.immutableExtraSeats;\r\n        let oldSeats = (this.immutableSlots.a.length + this.immutableSlots.b.length);\r\n\r\n        let newSeats = (this.singleReserve.seat.slots.a.length + this.singleReserve.seat.slots.b.length);\r\n        let newSunbeds = this.checkedExtraSeat;\r\n\r\n        // let updateAvailable = (oldSunbeds + oldSeats) != (newSunbeds + newSeats);\r\n        let updateAvailable = (oldSunbeds != newSunbeds) || (oldSeats != newSeats);\r\n\r\n        // let seats      = (this.singleReserve.seat.extra_seats === 0 ? (this.checkedExtraSeat || 0) : this.singleReserve.seat.extra_seats) + this.singleReserve.seat.slots.a.length + this.singleReserve.seat.slots.b.length;\r\n\r\n        // return (oldSunbeds + this.oldReservation.sunbeds) < seats ? true : false;\r\n\r\n        return updateAvailable;\r\n\r\n    }\r\n\r\n    getChangeAvailable() {\r\n        if (this.changedPhoneNumber) return false;\r\n        if (this.singleReserve.seat.type == 'baldaquin') return true;\r\n        // return (typeof this.oldReservation.extra_sunbeds == 'undefined' ? 0 : this.oldReservation.extra_sunbeds) + this.oldReservation.sunbeds == this.singleReserve.seat.extra_seats + this.singleReserve.seat.slots.a.length + this.singleReserve.seat.slots.b.length;\r\n\r\n\r\n\r\n        return (JSON.stringify(this.newSlots) === JSON.stringify(this.immutableSlots)) && (!this.checkedExtraSeat || (this.checkedExtraSeat && this.selectedExtraSeatsNumber === this.checkedExtraSeat))\r\n\r\n    }\r\n\r\n    old_action: any = false;\r\n    onClickChangePos() {\r\n\r\n        this.old_action = this.pageState.action;\r\n        this.pageState.action = 'pos-change';\r\n\r\n        let modal = this.modalCtrl.create(`page-grid`, { isModal: true, rData: this.singleReserve }, { cssClass: `gridModal` });\r\n\r\n        modal.onDidDismiss(data => {\r\n            // this.pageState.action = this.old_action;\r\n        });\r\n\r\n        modal.present();\r\n\r\n    }\r\n\r\n\r\n    saveChangePos = false;\r\n\r\n    onClickConfirm() {   // Update Seat!!!!\r\n        let param: any;\r\n        let amountt = this.getPrice();\r\n        param = {\r\n            id: this.singleReserve.id,\r\n            created_for_name: this.singleReserve.created_for_name,\r\n            created_for_phone: this.singleReserve.created_for_phone,\r\n            seat: {\r\n                type: this.seatInfo.type,\r\n                zone: this.navParams.data.seatInfo.zone,\r\n                number: this.seatInfo.number,\r\n                slots: this.singleReserve.seat.slots,\r\n                new_slots: this.newSlots,\r\n                position: this.newPosition,\r\n                extra_seats: this.checkedExtraSeat\r\n            },\r\n\r\n            amount: this.selectedReserveStatus.status == 'active' ? 0 : amountt,\r\n            old_amount: this.selectedReserveStatus.status == 'active' ? this.oldAmount + amountt : this.oldAmount,\r\n            waiter_id: this.seatInfo.waiter && this.seatInfo.waiter['id'] ? this.seatInfo.waiter.id : null,\r\n            avg_price: Number(this.averagePrice),\r\n            extra_price: this.seatInfo.sunbed_price\r\n        }\r\n        if (this.noprice) {\r\n            param.amount = 0;\r\n            param.old_amount = 0;\r\n        }\r\n        else {\r\n\r\n        }\r\n        param.seat.new_slots = this.getSelectedSlots();\r\n\r\n        if (this.selectedReserveStatus.status != 'changed') {\r\n            // param.seat.slots = this.newSlots;\r\n            // delete param.seat.new_slots\r\n        }\r\n        param.old_amount = param.old_amount\r\n        this.singleReserve.amount = amountt;\r\n\r\n\r\n        // param.amount = 0;\r\n        // param.amount = param.old_amount + param.amount\r\n        if (this.pageState.action === 'pos-change' && param.old_amount > 0) {  //vladimir\r\n\r\n            param.old_amount = param.old_amount + param.amount\r\n            param.seat.zone = this.posChangeZone;\r\n            param.amount = 0;\r\n        }\r\n        if (this.pageState.action === 'pos-change') {\r\n            param.waiter_id = this.seatInfo.waiter && this.seatInfo.waiter['id'] ? this.seatInfo.waiter.id : null;\r\n        }\r\n\r\n        if (this.saveChangePos) {\r\n            param.seat.zone = this.posChangeZone;\r\n        }\r\n\r\n        if (this.isProtocolSelectedReservation) {\r\n            // param.amount = this.customValue;\r\n            param.amount = 0;\r\n            param.old_amount = 0;\r\n            param.protocol = true;\r\n        }\r\n\r\n        if (this.isDiscountSelectedReservation) {\r\n            param.amount = 0;\r\n            let disper = parseFloat(this.discountPer);\r\n            param.old_amount = param.old_amount - param.old_amount * disper / 100;\r\n            // param.old_amount = this.customValue;\r\n            param.discount = true;\r\n        }\r\n\r\n        delete param.seat.position;\r\n        param.seat.index = this.seatInfo.index;\r\n\r\n        this.showConfirm().onDidDismiss((data, role) => {\r\n            //  this.loading();\r\n            if (role === 'ok') {\r\n\r\n                if (this.selectedReserveStatus.status == 'active') {\r\n                    param.amount = 0;\r\n                }\r\n\r\n                this.onClickConfirmRequest(param);\r\n\r\n                if (this.pageState.action === 'pos-change') {\r\n                    // this.selectedReserveStatus.status = 'booked';\r\n                    this.saveChangePos = true;\r\n                }\r\n\r\n                this.pageState.action = 'reservation';\r\n\r\n                if (this.isDiscountSelectedReservation) {\r\n                    this.selectedReserveStatus.status = 'active';\r\n                }\r\n\r\n                setTimeout(() => {\r\n                    this.api.get(`booking/view/${this.singleReserve.id}`, {}, { 'Content-Type': 'application/json' }, true, false).subscribe(reservationResponse => {\r\n\r\n                        this.loading(false);\r\n                        this.latestrresponse = reservationResponse;\r\n                        this.singleReserve.old_amount = this.latestrresponse.old_amount;\r\n                        this.singleReserve.amount = this.latestrresponse.amount;\r\n\r\n                        if (reservationResponse && reservationResponse.status !== 'booked') {\r\n                            this.getAllGuestCodes();\r\n                        }\r\n\r\n                        this.itemClick(reservationResponse, true, true);\r\n\r\n                        //this.singleReserve.old_amount = parseFloat(rervationResponse.amount + rervationResponse.old_amount);\r\n                        //this.singleReserve.amount = 0;\r\n                    });\r\n                }, 400);\r\n            }\r\n            // this.loading(false);\r\n        })\r\n    }\r\n\r\n    onClickConfirmRequest(param) {\r\n        console.log('booking/update');\r\n        \r\n        this.api.post(`booking/update`, param, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n\r\n            this.freeSunbedsData.old_count = this.checkedExtraSeat;\r\n            this.freeSunbedsData.old_remaining = this.freeSunbedsData.count;\r\n\r\n            if (this.pageState.action === 'pos-change') {\r\n                this.pageState.action = this.old_action;\r\n\r\n                if (this.singleReserve.status == 'active') {\r\n\r\n                    if (this.pageState.kind === 'baldaquin') {\r\n                        param.old_amount = param.old_amount + param.amount\r\n                        param.amount = 0;\r\n                    }\r\n                    this.close(false);\r\n\r\n\r\n                } else {\r\n\r\n                    this.stateChangePosition.changed = true;\r\n                    this.close(false);\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                if (this.singleReserve.status === 'active') {\r\n                    param.old_amount = param.old_amount + param.amount\r\n                    param.amount = 0;\r\n                    this.close(false);\r\n                }\r\n\r\n                if (this.singleReserve.status === 'booked') {\r\n\r\n                    this.pageState.compState = false;\r\n\r\n                    if (this.pageState.kind == 'sunbed') {\r\n                        this.singleReserve.amount = param.amount;\r\n                    }\r\n\r\n                    if (this.pageState.kind === 'umbrella') {\r\n                        this.oldReservation.extra_sunbeds = this.singleReserve.seat.extra_seats;\r\n                        this.oldReservation.sunbeds = this.singleReserve.seat.slots.a.length + this.singleReserve.seat.slots.b.length;\r\n                    }\r\n\r\n                    this.close(false);\r\n                }\r\n            }\r\n        }, err => {\r\n            console.error(err);\r\n        });\r\n    }\r\n\r\n    avail_sunbeds() {\r\n        return (this.bSeatNum.length > 0) ? true : false;\r\n    }\r\n\r\n\r\n    onClickPayOff() {\r\n        if (this.newReservation) {\r\n\r\n            if (this.newReservation.type !== 'baldaquin') {\r\n\r\n                if (this.newReservation.type === 'umbrella') {\r\n\r\n                    if ((JSON.stringify(this.newReservation.slots) !== JSON.stringify(this.newSlots))\r\n                        || (this.newReservation.extra !== this.checkedExtraSeat)) {\r\n\r\n                        // Update reservation\r\n                        let param: any = {\r\n                            id: this.singleReserve.id,\r\n                            amount: this.getPrice(),\r\n                            old_amount: 0\r\n                        };\r\n\r\n                        param.seat = {\r\n                            slots: this.newReservation.slots,\r\n                            new_slots: this.newSlots,\r\n                            extra_seats: this.checkedExtraSeat,\r\n                            type: this.newReservation.type,\r\n                            zone: this.newReservation.zone,\r\n                            position: this.newReservation.position,\r\n                            number: this.newReservation.number\r\n                        };\r\n\r\n                        this.showConfirm().onDidDismiss((data, role) => {\r\n                            // this.loading();\r\n                            if (role === 'ok') {\r\n\r\n                                // let that = this;\r\n                                // this.api.post(`booking/update`, param, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n\r\n                                // Reservation updated! Now pay it...\r\n                                this.api.post(`booking/pay`, { id: this.singleReserve.id }, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n\r\n                                    // hide loading                                       \r\n                                    this.selectedReserveStatus.status = 'active';\r\n                                    let oldPrice = this.getPrice();\r\n                                    this.singleReserve.old_amount = oldPrice || 0;\r\n                                    this.singleReserve.amount = 0;//amount should come from DB ( = 0)\r\n\r\n                                    this.oldAmount = this.singleReserve.old_amount;\r\n\r\n                                    this.close(false);\r\n                                    this.api.get(`booking/view/${this.singleReserve.id}`, {}, { 'Content-Type': 'application/json' }, true, false).subscribe(rervationResponse => {\r\n\r\n                                        this.latestrresponse = rervationResponse;\r\n                                        // this.itemClick(rervationResponse, true);\r\n                                        this.loading(false);\r\n                                        this.singleReserve.amount = rervationResponse.amount;\r\n                                    });\r\n                                }, err => {\r\n                                    console.error(err);\r\n                                });\r\n                            }\r\n                        })\r\n                    } else {\r\n\r\n                        console.log('this.pay.called1');\r\n                        // Only pay\r\n                        this.pay();\r\n\r\n                    }\r\n                }\r\n\r\n            } else {\r\n\r\n                // Only pay\r\n                console.log('this.pay.called2');\r\n                this.pay();\r\n\r\n            }\r\n\r\n        } else {\r\n            // Only pay\r\n            console.log('this.pay.called3');\r\n            this.pay();\r\n        }\r\n    }\r\n\r\n    setSelection() {\r\n        let eleList = this.getDetails();\r\n        let seatSlot = this.singleReserve.seat.slots;\r\n        let sideConfigs = this.sideConfigs;\r\n        let getSideName = function (slotname) {\r\n            let sides = Object.keys(sideConfigs);\r\n            for (let i = 0; i < sides.length; i++) {\r\n                let side = sides[i];\r\n                if (sideConfigs[side] && sideConfigs[side].indexOf(slotname) > -1) {\r\n                    return side;\r\n                }\r\n            }\r\n            return null;\r\n        }\r\n        Object.keys(seatSlot).map((seatName) => {\r\n            let side = getSideName(seatName);\r\n            if (side && eleList[side]) {\r\n                let list = eleList[side];\r\n                let selected = false;\r\n                let newList = [];\r\n                list.map((li) => {\r\n                    let newLi = (li.selected) ? 1 : 0;\r\n                    if (newLi) {\r\n                        selected = true;\r\n                    }\r\n                    newList.push(newLi);\r\n                });\r\n                if (selected) {\r\n                    seatSlot[seatName] = newList;\r\n                } else {\r\n                    seatSlot[seatName] = [];\r\n                }\r\n            }\r\n        });\r\n    }\r\n    setPaid() {\r\n        let that = this;\r\n        that.selectedReserveStatus.status = 'active';\r\n        that.singleReserve.status = 'active';\r\n        let oldPrice = this.getPrice();\r\n        this.singleReserve.old_amount = oldPrice || 0;\r\n        this.setSelection();\r\n        this.updateStatus();\r\n        this.refreshView();\r\n    }\r\n\r\n    pay() {\r\n        //ON PAY WITHOUT ANY UPDATE\r\n        this.showConfirm().onDidDismiss((data, role) => {\r\n            // this.loading();\r\n            if (role === 'ok') {\r\n                console.log('booking.pay');\r\n\r\n                this.api.post(\r\n                    `booking/pay`, { id: this.singleReserve.id },\r\n                    { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n\r\n                        // this.loading(false);\r\n                        this.selectedReserveStatus.status = 'active';\r\n                        // if(this.pageState.isNew){\r\n                        let oldPrice = this.getPrice();\r\n                        this.singleReserve.old_amount = oldPrice || 0;\r\n\r\n                        this.oldAmount = this.singleReserve.old_amount;\r\n\r\n                        this.close(false);\r\n                        this.api.get(`booking/view/${this.singleReserve.id}`, {}, { 'Content-Type': 'application/json' }, true, false).subscribe(rervationResponse => {\r\n\r\n                            // this.loading(false);\r\n                            this.latestrresponse = rervationResponse;\r\n                            this.singleReserve.amount = rervationResponse.amount;\r\n                        });\r\n                    }, err => {\r\n                        console.error(err);\r\n                    });\r\n            }\r\n            // this.loading(false);\r\n        })\r\n    }\r\n\r\n    getLocalDateTime(date: number) {\r\n        let dateObj = new Date(date);\r\n        let hoursWithTimezone = dateObj.getHours() + ((-1) * (dateObj.getTimezoneOffset() / 60))\r\n\r\n        return new Date(new Date(date).setHours(hoursWithTimezone)).getTime();\r\n    }\r\n\r\n    onCustomValueChanged(event) {\r\n        this.customValue = parseFloat(event.value);\r\n\r\n        if (isNaN(this.customValue)) {\r\n            event.value = \"\";\r\n            this.customValue = 0;\r\n        } else {\r\n            event.value = this.customValue;\r\n        }\r\n\r\n        this.changedCustomPrice = this.customValue != this.singleReserve.amount;\r\n    }\r\n\r\n    onClickReserve() { //create reservation\r\n        let params: any = {};\r\n        let start: any;\r\n        let end: any;\r\n\r\n        if (this.pageState.isNew || this.pageState.kind == 'sunbed') {\r\n            start = new Date(this.pageState.period.from).getTime();\r\n            end = new Date(this.pageState.period.to).getTime();\r\n        } else {\r\n            start = new Date(this.singleReserve.period[0].date).getTime();\r\n            end = new Date(this.singleReserve.period[this.singleReserve.period.length - 1].date).getTime();\r\n        }\r\n\r\n        let now = new Date();\r\n        let hours = now.getHours();\r\n        let minutes = now.getMinutes();\r\n        let seconds = now.getSeconds();\r\n        let parsedStart = this.pageState.period.isToday ? new Date(new Date(start).setHours(hours, minutes, seconds)).getTime() : new Date(new Date(start).setHours(0, 0, 0)).getTime();\r\n        let parsedEnd = new Date(new Date(end).setHours(23, 59, 59)).getTime();\r\n\r\n        start = this.getLocalDateTime(parsedStart)\r\n        end = this.getLocalDateTime(parsedEnd)\r\n\r\n        let modalState = {\r\n            action: this.pageState.action,\r\n            period: { start: this.pageState.period.from, end: this.pageState.period.to },\r\n            kind: this.pageState.kind,\r\n            reservation_id: '',\r\n            status: 'booked'\r\n        };\r\n\r\n        start = start; // this.getAdjustedTime(start);\r\n        end = end; // this.getAdjustedTime(end);\r\n\r\n        let avgPrice = 0;\r\n        let extPrice = 0;\r\n        if (!this.noprice) {\r\n            avgPrice = this.averagePrice;\r\n            extPrice = this.seatInfo.sunbed_price;\r\n        }\r\n        else {\r\n            this.averagePrice = 0;\r\n            this.seatInfo.sunbed_price = 0;\r\n        }\r\n        params = {\r\n            beach_id: this.beach_id,\r\n            broker_id: this.seatInfo.broker_id,\r\n            waiter_id: this.seatInfo.waiter && this.seatInfo.waiter['id'] ? this.seatInfo.waiter.id : null,\r\n            created_for_id: this.singleReserve.created_for_id,\r\n            created_for_name: this.singleReserve.created_for_name,\r\n            status: \"booked\",\r\n            seat: {\r\n                type: this.seatInfo.type,\r\n                index: this.seatInfo.index,\r\n                zone: this.seatInfo.zone,\r\n                number: this.seatInfo.number,\r\n                slots: this.singleReserve.seat.slots,\r\n                position: this.seatInfo.coords,\r\n                extra_seats: this.checkedExtraSeat, //this.singleReserve.seat.extra_seats,\r\n                seats_num: this.seatInfo.seats\r\n            },\r\n            phone: this.singleReserve.created_for_phone,\r\n            start_date: start,\r\n            end_date: end,\r\n            amount: this.getPrice(),\r\n            discount_per: this.discountPer,\r\n            avg_price: avgPrice,\r\n            extra_price: extPrice //ALSO FOR THIS ONE APPLY ok\r\n        }\r\n\r\n        delete params.seat.position;\r\n        params.seat.slots = this.getSelectedSlots();\r\n        params.beach_name = this.beach_name;\r\n        params.protocol = this.isProtocolModeOn;\r\n\r\n        params.discount = this.isDiscountModeOn;\r\n        params.startDate = this.pageState.period.from || this.dp.transform(new Date(params.start_date), 'yyyy-MM-dd');\r\n        params.endDate = this.pageState.period.to || this.dp.transform(new Date(params.end_date), 'yyyy-MM-dd');\r\n\r\n        if ((this.isProtocolModeOn || this.isDiscountModeOn || this.noprice) && (this.pageState.isNew || this.isFreeSunbed)) {\r\n            params.amount = this.customValue;\r\n        }\r\n        if (this.isProtocolModeOn) {\r\n            params.amount = 0;\r\n        }\r\n        if (this.noprice) {\r\n            params.amount = 0;\r\n        }\r\n        if (!params.seat.zone) {\r\n            params.seat.zone = this.navParams.data.seatInfo.zone;\r\n        }\r\n        this.showConfirm().onDidDismiss((data, role) => {\r\n            this.loading();\r\n\r\n            if (role === 'ok') {\r\n\r\n                this.pageState.isNew = false;\r\n                this.isFreeSunbed = false;\r\n\r\n                this.api.post('booking', params, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n                    this.singleReserve.id = res.reservation_id;\r\n\r\n                    modalState.reservation_id = res.reservation_id;\r\n                    this.changeModalState(modalState);\r\n\r\n                    try {\r\n                        this.newReservation = {\r\n                            slots: JSON.parse(JSON.stringify(params.seat.slots)),\r\n                            extra: JSON.parse(JSON.stringify(params.seat.extra_seats)),\r\n                            type: params.seat.type,\r\n                            zone: params.seat.zone,\r\n                            position: params.seat.position,\r\n                            // index: params.seat.index,\r\n                            number: params.seat.number\r\n                        };\r\n                    } catch (e) {\r\n                    }\r\n\r\n                    this.pageState.compState = false;\r\n\r\n                    this.api.get(`booking/view/${res.reservation_id}`, {}, { 'Content-Type': 'application/json' }, true, false).subscribe(rervationResponse => {\r\n                        if (this.isProtocolModeOn) {\r\n                            this.confirmPosition(rervationResponse, 'payoff-skip-confirm')\r\n                            // this.isProtocolModeOn = false;\r\n                            this.selectedReserveStatus.status = 'active';\r\n                            this.close(false);\r\n                            this.setPaid();\r\n                        }\r\n                        if (this.isDiscountModeOn) {\r\n                            this.confirmPosition(rervationResponse, 'payoff-skip-confirm')\r\n                            //this.isDiscountModeOn = false\r\n                            this.selectedReserveStatus.status = 'active';\r\n                            this.close(false);\r\n                            this.setPaid();\r\n                        }\r\n                        // else {\r\n                        this.itemClick(rervationResponse, true, true);\r\n                        //}\r\n                        this.isLoading = false;\r\n                        this.loading(false);\r\n                    });\r\n                }, err => {\r\n                    this.isLoading = false;\r\n\r\n                    this.loading(false);\r\n                    this.confirmPopover = this.alertCtrl.create({\r\n                        title: err.message,\r\n                        buttons: [\r\n                            {\r\n                                text: this.config.translate.translate.instant('Buttons.OK'),\r\n                                role: 'cancel',\r\n                                handler: () => {\r\n                                }\r\n                            }\r\n                        ],\r\n                        enableBackdropDismiss: false,\r\n                    });\r\n                    this.confirmPopover.present();\r\n                });\r\n\r\n            } else {\r\n                this.loading(false);\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    onClickReserve1copy() {\r\n\r\n        let params: any = {};\r\n        let start: any;\r\n        let end: any;\r\n\r\n        if (this.pageState.isNew || this.pageState.kind == 'sunbed') {\r\n            start = new Date(this.pageState.period.from).getTime();\r\n            end = new Date(this.pageState.period.to).getTime();\r\n        } else {\r\n            start = new Date(this.singleReserve.period[0].date).getTime();\r\n            end = new Date(this.singleReserve.period[this.singleReserve.period.length - 1].date).getTime();\r\n        }\r\n\r\n        let now = new Date();\r\n        let hours = now.getHours();\r\n        let minutes = now.getMinutes();\r\n        let seconds = now.getSeconds();\r\n        let parsedStart = this.pageState.period.isToday ? new Date(new Date(start).setHours(hours, minutes, seconds)).getTime() : new Date(new Date(start).setHours(0, 0, 0)).getTime();\r\n        let parsedEnd = new Date(new Date(end).setHours(23, 59, 59)).getTime();\r\n\r\n        start = this.getLocalDateTime(parsedStart)\r\n        end = this.getLocalDateTime(parsedEnd)\r\n\r\n        let modalState = {\r\n            action: this.pageState.action,\r\n            period: { start: this.pageState.period.from, end: this.pageState.period.to },\r\n            kind: this.pageState.kind,\r\n            reservation_id: '',\r\n            status: 'booked'\r\n        };\r\n\r\n        if (this.seatInfo.type == 'umbrella') { // If current seat is Umbrella\r\n\r\n            params = {\r\n                beach_id: this.beach_id,\r\n                broker_id: this.seatInfo.broker_id,\r\n                waiter_id: this.seatInfo.waiter && this.seatInfo.waiter['id'] ? this.seatInfo.waiter.id : null,\r\n                created_for_id: this.singleReserve.created_for_id,\r\n                created_for_name: this.singleReserve.created_for_name,\r\n                status: \"booked\",\r\n                seat: {\r\n                    type: this.seatInfo.type,\r\n                    zone: this.seatInfo.zone,\r\n                    number: this.seatInfo.number,\r\n                    slots: this.singleReserve.seat.slots,\r\n                    position: this.seatInfo.coords,\r\n                    extra_seats: this.singleReserve.seat.extra_seats,\r\n                    seats_num: this.seatInfo.seats\r\n                },\r\n                phone: this.singleReserve.created_for_phone,\r\n                start_date: start,\r\n                end_date: end,\r\n                amount: this.getPrice()\r\n            }\r\n        } else if (this.seatInfo.type == 'baldaquin') {  // If current seat is Baldaquin\r\n\r\n            params = {\r\n                beach_id: this.beach_id,\r\n                broker_id: this.seatInfo.broker_id,\r\n                waiter_id: this.seatInfo.waiter && this.seatInfo.waiter['id'] ? this.seatInfo.waiter.id : null,\r\n                created_for_id: this.singleReserve.created_for_id,\r\n                created_for_name: this.singleReserve.created_for_name,\r\n                status: \"booked\",\r\n                seat: {\r\n                    type: \"baldaquin\",\r\n                    zone: this.seatInfo.zone,\r\n                    number: this.seatInfo.number,\r\n                    position: this.seatInfo.coords\r\n                },\r\n                phone: this.singleReserve.created_for_phone,\r\n                start_date: start,\r\n                end_date: end,\r\n                amount: this.getPrice()\r\n            }\r\n\r\n        } else if (this.pageState.kind == 'sunbed') {\r\n            params = {\r\n                beach_id: this.beach_id,\r\n                broker_id: this.broker_id,\r\n                waiter_id: this.seatInfo.waiter && this.seatInfo.waiter['id'] ? this.seatInfo.waiter.id : null,\r\n                created_for_id: this.singleReserve.created_for_id,\r\n                created_for_name: this.singleReserve.created_for_name,\r\n                status: \"booked\",\r\n                seat: {\r\n                    type: \"sunbed\",\r\n                    count: this.checkedExtraSeat\r\n                },\r\n                phone: this.singleReserve.created_for_phone,\r\n                start_date: start,\r\n                end_date: end,\r\n                amount: this.getSunbedTotal()\r\n            }\r\n        }\r\n\r\n        params.beach_name = this.beach_name;\r\n        params.protocol = this.isProtocolModeOn;\r\n        params.discount = this.isDiscountModeOn;\r\n\r\n        if ((this.isProtocolModeOn || this.isDiscountModeOn) && (this.pageState.isNew || this.isFreeSunbed)) {\r\n            params.amount = this.customValue;\r\n            // return;\r\n        }\r\n\r\n        this.showConfirm().onDidDismiss((data, role) => {\r\n            this.loading();\r\n            if (role === 'ok') {\r\n\r\n                this.api.post('booking', params, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n\r\n                    this.singleReserve.id = res.reservation_id;\r\n\r\n                    modalState.reservation_id = res.reservation_id;\r\n\r\n                    this.changeModalState(modalState);\r\n\r\n                    if (this.pageState.kind == 'sunbed') {\r\n\r\n                        this.newReservation = {\r\n                            type: 'sunbed',\r\n                            count: this.checkedExtraSeat\r\n                        };\r\n\r\n                        this.freeSunbedsData.old_count = this.checkedExtraSeat;\r\n                        this.freeSunbedsData.old_remaining = this.freeSunbedsData.count;\r\n\r\n                        this.pageState.compState = false;\r\n\r\n                    } else {\r\n\r\n                        if (this.pageState.kind === 'umbrella') {\r\n\r\n                            this.newReservation = {\r\n                                slots: JSON.parse(JSON.stringify(params.seat.slots)),\r\n                                extra: JSON.parse(JSON.stringify(params.seat.extra_seats)),\r\n                                type: params.seat.type,\r\n                                zone: params.seat.zone,\r\n                                position: params.seat.position,\r\n                                number: params.seat.number\r\n                            };\r\n\r\n                        }\r\n\r\n                        this.pageState.compState = false;\r\n\r\n                    }\r\n\r\n                    this.api.get(`booking/view/${res.reservation_id}`, {}, { 'Content-Type': 'application/json' }, true, false).subscribe(rervationResponse => {\r\n                        if (this.isProtocolModeOn) {\r\n                            this.confirmPosition(rervationResponse, 'payoff-skip-confirm')\r\n                            //this.isProtocolModeOn = false\r\n                            this.selectedReserveStatus.status = 'active';\r\n                            this.close(false);\r\n                            this.setPaid();\r\n                        }\r\n                        if (this.isDiscountModeOn) {\r\n                            this.confirmPosition(rervationResponse, 'payoff-skip-confirm')\r\n                            //this.isDiscountModeOn = false\r\n                            this.selectedReserveStatus.status = 'active';\r\n                            this.close(false);\r\n                            this.setPaid();\r\n                        }\r\n                        else {\r\n                            this.itemClick(rervationResponse, true);\r\n\r\n                        }\r\n                    })\r\n                }, err => { });\r\n\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    onCancelReservation() {\r\n        let param = {\r\n            id: this.singleReserve.id\r\n        }\r\n        this.showConfirm().onDidDismiss((data, role) => {\r\n            if (role === 'ok') {\r\n                this.api.post(`booking/cancel`, param, { 'Content-Type': 'application/json' }, true, false).subscribe(res => {\r\n                    this.close();\r\n                    this.initSingleReservation();\r\n                }, err => { });\r\n            }\r\n        })\r\n    }\r\n\r\n    getSunbedTotal() {\r\n\r\n        const checkValue = this.checkedExtraSeat ? this.checkedExtraSeat : 0;\r\n\r\n        if (this.pageState.isNew) {\r\n\r\n            return this.freeSunbedsData.price * checkValue * (this.pageState.period.period + 1);\r\n\r\n        } else {\r\n\r\n            // if ( this.singleReserve.payment_method === 'online' && checkValue <= this.freeSunbedsData.old_count ) {\r\n            //   return 0;\r\n            // }\r\n\r\n            // return this.freeSunbedsData.price * checkValue * this.singleReserve.period.length - this.singleReserve.old_amount;\r\n\r\n            if ((this.singleReserve.payment_method === 'online' || this.singleReserve.status === 'active') && checkValue <= this.freeSunbedsData.old_count) {\r\n                return this.singleReserve.amount > 0 ? this.singleReserve.amount : 0;\r\n            }\r\n\r\n            return this.freeSunbedsData.price * checkValue * this.singleReserve.period.length - this.singleReserve.old_amount;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    loading(show: boolean = true) {\r\n\r\n        if (show) {\r\n\r\n            this.loadingInstance = this.loadingCtrl.create({\r\n                spinner: 'hide',\r\n                content: this.translate.instant(\"Messages.PLEASE_WAIT\")\r\n            });\r\n\r\n            this.loadingInstance.present();\r\n\r\n        } else {\r\n            if (this.loadingInstance) {\r\n                this.loadingInstance.dismiss(null, null, {\r\n                    duration: 0,\r\n                    animate: false\r\n                });\r\n            }            \r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Enable or disable the no price toggle\r\n     * @param event \r\n     */\r\n    enableDisablePrice(event) {\r\n        // if(this.noprice){\r\n        //     this.pageState.isNew = true;\r\n        // }\r\n        // localStorage.setItem('no_price_' + this.beach_id + '_' + this.seatInfo.number, event);\r\n        this.noprice = event;\r\n        // localStorage.removeItem('no_price');\r\n        //localStorage.setItem('no_price',event);\r\n\r\n        this.storage.set('no_price', event);\r\n    }\r\n    appendLeadingZeroes(n) {\r\n        if (n <= 9) {\r\n            return \"0\" + n;\r\n        }\r\n        return n\r\n    }\r\n    onClickPrint() {\r\n        let today = new Date();\r\n        let date = this.appendLeadingZeroes(today.getDate()) + '-' + this.appendLeadingZeroes(today.getMonth() + 1) + '-' + today.getFullYear() + \"  \" + this.appendLeadingZeroes(today.getHours()) + \":\" + this.appendLeadingZeroes(today.getMinutes());\r\n        let printHeader = [this.beach_name, date, \"----------------------------\", \"Guest codes\"];\r\n        today.setMinutes(today.getMinutes() + 30);\r\n        let dateExpire = this.appendLeadingZeroes(today.getDate()) + '-' + this.appendLeadingZeroes(today.getMonth() + 1) + '-' + today.getFullYear() + \"  \" + this.appendLeadingZeroes(today.getHours()) + \":\" + this.appendLeadingZeroes(today.getMinutes());\r\n        let printFooter = [\"These codes will expire at :\", dateExpire, \"----------------------------\", \"How to use it :\", \"- app name : Smart Beach\", \"a. download app playstore or       appstore\"];\r\n        let printFooter1 = [\"b. Insert guest code and press     OK\", \"c. Check Beach Menu section\", \"d. Send your order/call waiter\", \"Note: Once code is validated,\"];\r\n        let printFooter2 = [\"you are allow to use this code \", \"only from that phone\", \"----------------------------\", \"Thank you for your choise.\", \"Powered by Smart Beach\", \"                                      \"];\r\n\r\n        printHeader.forEach((item, index) => {\r\n            window.DatecsPrinter.printText(\"{br}\", 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n            if (index == 0) {\r\n                window.DatecsPrinter.printText('{center}' + item, 'ISO-8859-1',\r\n                    function () {\r\n\r\n                    }\r\n                );\r\n            }\r\n            else {\r\n                window.DatecsPrinter.printText(item, 'ISO-8859-1',\r\n                    function () {\r\n\r\n                    }\r\n                );\r\n            }\r\n        });\r\n        this.guestCodes.forEach((item, index) => {\r\n            window.DatecsPrinter.printText(\"{br}\", 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n            window.DatecsPrinter.printText((index + 1) + \". \" + item.code, 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n\r\n        });\r\n        printFooter.forEach((item, index) => {\r\n            window.DatecsPrinter.printText(\"{br}\", 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n            window.DatecsPrinter.printText(item, 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n\r\n        });\r\n        printFooter1.forEach((item, index) => {\r\n            window.DatecsPrinter.printText(\"{br}\", 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n            window.DatecsPrinter.printText(item, 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n\r\n        });\r\n        printFooter2.forEach((item, index) => {\r\n            window.DatecsPrinter.printText(\"{br}\", 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n            window.DatecsPrinter.printText(item, 'ISO-8859-1',\r\n                function () {\r\n\r\n                }\r\n            );\r\n\r\n        });\r\n        window.DatecsPrinter.printText(\"{br}{br}\", 'ISO-8859-1',\r\n            function () {\r\n\r\n            }\r\n        );\r\n\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/include/pop-up/pop-up.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar switchMap_1 = require('../../operator/switchMap');\nObservable_1.Observable.prototype.switchMap = switchMap_1.switchMap;\n//# sourceMappingURL=switchMap.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/switchMap.js\n// module id = 472\n// module chunks = 0","\"use strict\";\nvar switchMap_1 = require('../operators/switchMap');\n/* tslint:enable:max-line-length */\n/**\n * Projects each source value to an Observable which is merged in the output\n * Observable, emitting values only from the most recently projected Observable.\n *\n * <span class=\"informal\">Maps each value to an Observable, then flattens all of\n * these inner Observables using {@link switch}.</span>\n *\n * <img src=\"./img/switchMap.png\" width=\"100%\">\n *\n * Returns an Observable that emits items based on applying a function that you\n * supply to each item emitted by the source Observable, where that function\n * returns an (so-called \"inner\") Observable. Each time it observes one of these\n * inner Observables, the output Observable begins emitting the items emitted by\n * that inner Observable. When a new inner Observable is emitted, `switchMap`\n * stops emitting items from the earlier-emitted inner Observable and begins\n * emitting items from the new one. It continues to behave like this for\n * subsequent inner Observables.\n *\n * @example <caption>Rerun an interval Observable on every click event</caption>\n * var clicks = Rx.Observable.fromEvent(document, 'click');\n * var result = clicks.switchMap((ev) => Rx.Observable.interval(1000));\n * result.subscribe(x => console.log(x));\n *\n * @see {@link concatMap}\n * @see {@link exhaustMap}\n * @see {@link mergeMap}\n * @see {@link switch}\n * @see {@link switchMapTo}\n *\n * @param {function(value: T, ?index: number): ObservableInput} project A function\n * that, when applied to an item emitted by the source Observable, returns an\n * Observable.\n * @param {function(outerValue: T, innerValue: I, outerIndex: number, innerIndex: number): any} [resultSelector]\n * A function to produce the value on the output Observable based on the values\n * and the indices of the source (outer) emission and the inner Observable\n * emission. The arguments passed to this function are:\n * - `outerValue`: the value that came from the source\n * - `innerValue`: the value that came from the projected Observable\n * - `outerIndex`: the \"index\" of the value that came from the source\n * - `innerIndex`: the \"index\" of the value from the projected Observable\n * @return {Observable} An Observable that emits the result of applying the\n * projection function (and the optional `resultSelector`) to each item emitted\n * by the source Observable and taking only the values from the most recently\n * projected inner Observable.\n * @method switchMap\n * @owner Observable\n */\nfunction switchMap(project, resultSelector) {\n    return switchMap_1.switchMap(project, resultSelector)(this);\n}\nexports.switchMap = switchMap;\n//# sourceMappingURL=switchMap.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/operator/switchMap.js\n// module id = 473\n// module chunks = 0"],"sourceRoot":""}