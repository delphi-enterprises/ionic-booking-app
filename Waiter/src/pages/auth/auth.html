<!--
  Generated template for the AuthPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-content>
    <div class="lang-comp">
    <lang-toggle [data]="countries"></lang-toggle>
</div>
   <!--  <ion-header>
    </ion-header>
    <div class="top_bar">
        <ion-title>register</ion-title>
        
    </div> -->

    <div class="app-logo">
        <!-- <img src="assets/imgs/app_logo.png" /> -->
        <p translate>MAIN.TITLE</p>
        <span translate>MAIN.WAITER</span>
    </div>
    <ion-list no-line>
        <ng-container *ngIf="pageState.searchState">
            <ion-item class="search-bar">
                <ion-label>
                    <ion-icon name="ios-search-outline"></ion-icon>
                </ion-label>
                <ion-input type="text" placeholder="Search" [(ngModel)]="selectedBeach" (ionChange)="searchBeach($event)" (ionFocus)="onClickSearchField()"
                    (click)="onClickSearchField()" #searchInput></ion-input>
            </ion-item>
            <ng-container *ngIf="pageState.searchEndState">
                <ion-item class="unlock-inp">
                    <ion-input type="password" placeholder="Unlock Code" [(ngModel)]="unlockCode" (ionChange)="onInputUnlock($event)" #unlockInput></ion-input>
                </ion-item>
                <button ion-button color="light" *ngIf="pageState.unlockState" (click)="onClickUnlock()">{{ 'ACTIONS.NEXT' | translate}}</button>
            </ng-container>
            <ng-container *ngIf="pageState.isSearch">
                <div class="triangle"></div>
                <div class="search-results">
                    <ion-item *ngFor="let beach of beachAry" (click)="beachClick(beach)">
                        {{ beach.name }}
                    </ion-item>
                </div>
            </ng-container>
        </ng-container>
        <!-- Register & Login forms -->
        <ng-container *ngIf="pageState.registerState">
            <form [formGroup]="authForm" (ngSubmit)="onClickRegister(authForm.value)">
                <!-- <ion-item [ngClass]="(!authForm.controls.phone.valid && (authForm.controls.phone.dirty || submitted)) ? 'has-valid-error' : ''">
                    <ion-label><ion-icon name="ios-contact-outline"></ion-icon></ion-label>
                    <ion-input type="phone" placeholder="PhoneNumber" [formControl]="authForm.controls['phone']"></ion-input>
                </ion-item> -->
                <!-- <div *ngIf="!authForm.controls.phone.valid && (authForm.controls.phone.dirty || submitted)" class="has-valid-error">* Required at least 4 ~ 18 letter</div> -->
                <ion-item [ngClass]="(!authForm.controls.password.valid && (authForm.controls.password.dirty || submitted)) ? 'has-valid-error' : ''">
                    <ion-label>
                        <ion-icon name="ios-lock-outline"></ion-icon>
                    </ion-label>
                    <ion-input type="password" placeholder="Password" [formControl]="authForm.controls['password']"></ion-input>
                </ion-item>
                <div *ngIf="!authForm.controls.password.valid && (authForm.controls.password.dirty || submitted)" class="has-valid-error"
                    translate>MESSAGES.VALIDATE_PASSWORD</div>
                <ion-item [ngClass]="(!authForm.controls.password2.valid && (authForm.controls.password2.dirty || submitted)) ? 'item-has-valid-error' : ''">
                    <ion-label>
                        <ion-icon name="ios-lock-outline"></ion-icon>
                    </ion-label>
                    <ion-input type="password" placeholder="Confirm Password" [formControl]="authForm.controls['password2']"></ion-input>
                </ion-item>
                <div *ngIf="!authForm.controls.password2.valid && (authForm.controls.password2.dirty || submitted)" class="has-valid-error"
                    translate>MESSAGES.PASSWORD_NOTMATCH</div>
                <button ion-button color="light" type="submit">{{'ACTIONS.CONFIRM' | translate}}</button>
            </form>
        </ng-container>
        <ng-container *ngIf="pageState.loginState && authForm">
            <form [formGroup]="authForm" (ngSubmit)="onClickSignIn(authForm.value)">
                <ion-item [ngClass]="(!authForm.controls.phone.valid && (authForm.controls.phone.dirty || submitted)) ? 'has-valid-error' : ''">
                    <ion-label>
                        <ion-icon name="ios-contact-outline"></ion-icon>
                        <span class="plus-symbol"></span>
                    </ion-label>
                    <ion-input type="number" placeholder="PhoneNumber" [formControl]="authForm.controls['phone']"></ion-input>
                </ion-item>
                <div *ngIf="!authForm.controls.phone.valid && (authForm.controls.phone.dirty || submitted)" class="has-valid-error" translate>MESSAGES.VALIDATE_PHONE</div>
                <ion-item [ngClass]="(!authForm.controls.password.valid && (authForm.controls.password.dirty || submitted)) ? 'has-valid-error' : ''">
                    <ion-label>
                        <ion-icon name="ios-lock-outline"></ion-icon>
                    </ion-label>
                    <ion-input type="password" placeholder="Password" [formControl]="authForm.controls['password']"></ion-input>
                </ion-item>
                <div *ngIf="!authForm.controls.password.valid && (authForm.controls.password.dirty || submitted)" class="has-valid-error"
                    translate>MESSAGES.VALIDATE_PASSWORD</div>
                <button ion-button color="light" type="submit">{{ 'ACTIONS.SIGN_IN' | translate}}</button>
            </form>
        </ng-container>

    </ion-list>

    <div class="bottom-block  should-hide">
        <ng-container *ngIf="pageState.loginState">
            <a translate>MESSAGES.NEW_ON_SMART_BEACH</a>
            <span class="a-brother" (click)="goSignup()" translate>ACTIONS.SIGN_UP</span>
        </ng-container>
        <ng-container *ngIf="pageState.searchState || pageState.registerState">
            <a translate>MESSAGES.ALREADY_HAVE_ACCOUNT</a>
            <span class="a-brother" (click)="goLogin()" translate>ACTIONS.LOGIN</span>
        </ng-container>
    </div>
</ion-content>